(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var J="top",se="bottom",ae="right",Z="left",ni="auto",zt=[J,se,ae,Z],gt="start",$t="end",gr="clippingParents",Co="viewport",kt="popper",vr="reference",Oi=zt.reduce(function(t,e){return t.concat([e+"-"+gt,e+"-"+$t])},[]),_o=[].concat(zt,[ni]).reduce(function(t,e){return t.concat([e,e+"-"+gt,e+"-"+$t])},[]),yr="beforeRead",br="read",wr="afterRead",Er="beforeMain",Cr="main",_r="afterMain",xr="beforeWrite",Sr="write",Tr="afterWrite",Ar=[yr,br,wr,Er,Cr,_r,xr,Sr,Tr];function ye(t){return t?(t.nodeName||"").toLowerCase():null}function ne(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Qe(t){var e=ne(t).Element;return t instanceof e||t instanceof Element}function re(t){var e=ne(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ii(t){if(typeof ShadowRoot>"u")return!1;var e=ne(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Or(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},o=e.attributes[n]||{},r=e.elements[n];!re(r)||!ye(r)||(Object.assign(r.style,i),Object.keys(o).forEach(function(s){var a=o[s];a===!1?r.removeAttribute(s):r.setAttribute(s,a===!0?"":a)}))})}function Lr(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var o=e.elements[i],r=e.attributes[i]||{},s=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=s.reduce(function(l,c){return l[c]="",l},{});!re(o)||!ye(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}const xo={name:"applyStyles",enabled:!0,phase:"write",fn:Or,effect:Lr,requires:["computeStyles"]};function ge(t){return t.split("-")[0]}var ze=Math.max,yn=Math.min,vt=Math.round;function Wn(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function So(){return!/^((?!chrome|android).)*safari/i.test(Wn())}function yt(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),o=1,r=1;e&&re(t)&&(o=t.offsetWidth>0&&vt(i.width)/t.offsetWidth||1,r=t.offsetHeight>0&&vt(i.height)/t.offsetHeight||1);var s=Qe(t)?ne(t):window,a=s.visualViewport,l=!So()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/o,d=(i.top+(l&&a?a.offsetTop:0))/r,p=i.width/o,f=i.height/r;return{width:p,height:f,top:d,right:c+p,bottom:d+f,left:c,x:c,y:d}}function oi(t){var e=yt(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function To(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ii(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Le(t){return ne(t).getComputedStyle(t)}function Ir(t){return["table","td","th"].indexOf(ye(t))>=0}function He(t){return((Qe(t)?t.ownerDocument:t.document)||window.document).documentElement}function Sn(t){return ye(t)==="html"?t:t.assignedSlot||t.parentNode||(ii(t)?t.host:null)||He(t)}function Li(t){return!re(t)||Le(t).position==="fixed"?null:t.offsetParent}function Mr(t){var e=/firefox/i.test(Wn()),n=/Trident/i.test(Wn());if(n&&re(t)){var i=Le(t);if(i.position==="fixed")return null}var o=Sn(t);for(ii(o)&&(o=o.host);re(o)&&["html","body"].indexOf(ye(o))<0;){var r=Le(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function Yt(t){for(var e=ne(t),n=Li(t);n&&Ir(n)&&Le(n).position==="static";)n=Li(n);return n&&(ye(n)==="html"||ye(n)==="body"&&Le(n).position==="static")?e:n||Mr(t)||e}function ri(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Bt(t,e,n){return ze(t,yn(e,n))}function Dr(t,e,n){var i=Bt(t,e,n);return i>n?n:i}function Ao(){return{top:0,right:0,bottom:0,left:0}}function Oo(t){return Object.assign({},Ao(),t)}function Lo(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Pr=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Oo(typeof e!="number"?e:Lo(e,zt))};function kr(t){var e,n=t.state,i=t.name,o=t.options,r=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ge(n.placement),l=ri(a),c=[Z,ae].indexOf(a)>=0,d=c?"height":"width";if(!(!r||!s)){var p=Pr(o.padding,n),f=oi(r),m=l==="y"?J:Z,y=l==="y"?se:ae,b=n.rects.reference[d]+n.rects.reference[l]-s[l]-n.rects.popper[d],E=s[l]-n.rects.reference[l],C=Yt(r),_=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,S=b/2-E/2,u=p[m],x=_-f[d]-p[y],h=_/2-f[d]/2+S,w=Bt(u,h,x),A=l;n.modifiersData[i]=(e={},e[A]=w,e.centerOffset=w-h,e)}}function Rr(t){var e=t.state,n=t.options,i=n.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||To(e.elements.popper,o)&&(e.elements.arrow=o))}const Br={name:"arrow",enabled:!0,phase:"main",fn:kr,effect:Rr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bt(t){return t.split("-")[1]}var Nr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hr(t,e){var n=t.x,i=t.y,o=e.devicePixelRatio||1;return{x:vt(n*o)/o||0,y:vt(i*o)/o||0}}function Ii(t){var e,n=t.popper,i=t.popperRect,o=t.placement,r=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,p=t.isFixed,f=s.x,m=f===void 0?0:f,y=s.y,b=y===void 0?0:y,E=typeof d=="function"?d({x:m,y:b}):{x:m,y:b};m=E.x,b=E.y;var C=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),S=Z,u=J,x=window;if(c){var h=Yt(n),w="clientHeight",A="clientWidth";if(h===ne(n)&&(h=He(n),Le(h).position!=="static"&&a==="absolute"&&(w="scrollHeight",A="scrollWidth")),h=h,o===J||(o===Z||o===ae)&&r===$t){u=se;var L=p&&h===x&&x.visualViewport?x.visualViewport.height:h[w];b-=L-i.height,b*=l?1:-1}if(o===Z||(o===J||o===se)&&r===$t){S=ae;var v=p&&h===x&&x.visualViewport?x.visualViewport.width:h[A];m-=v-i.width,m*=l?1:-1}}var T=Object.assign({position:a},c&&Nr),O=d===!0?Hr({x:m,y:b},ne(n)):{x:m,y:b};if(m=O.x,b=O.y,l){var M;return Object.assign({},T,(M={},M[u]=_?"0":"",M[S]=C?"0":"",M.transform=(x.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",M))}return Object.assign({},T,(e={},e[u]=_?b+"px":"",e[S]=C?m+"px":"",e.transform="",e))}function Fr(t){var e=t.state,n=t.options,i=n.gpuAcceleration,o=i===void 0?!0:i,r=n.adaptive,s=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ge(e.placement),variation:bt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ii(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ii(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Vr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fr,data:{}};var un={passive:!0};function $r(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,r=o===void 0?!0:o,s=i.resize,a=s===void 0?!0:s,l=ne(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(d){d.addEventListener("scroll",n.update,un)}),a&&l.addEventListener("resize",n.update,un),function(){r&&c.forEach(function(d){d.removeEventListener("scroll",n.update,un)}),a&&l.removeEventListener("resize",n.update,un)}}const Ur={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$r,data:{}};var jr={left:"right",right:"left",bottom:"top",top:"bottom"};function mn(t){return t.replace(/left|right|bottom|top/g,function(e){return jr[e]})}var qr={start:"end",end:"start"};function Mi(t){return t.replace(/start|end/g,function(e){return qr[e]})}function si(t){var e=ne(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function ai(t){return yt(He(t)).left+si(t).scrollLeft}function Wr(t,e){var n=ne(t),i=He(t),o=n.visualViewport,r=i.clientWidth,s=i.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var c=So();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+ai(t),y:l}}function Gr(t){var e,n=He(t),i=si(t),o=(e=t.ownerDocument)==null?void 0:e.body,r=ze(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=ze(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+ai(t),l=-i.scrollTop;return Le(o||n).direction==="rtl"&&(a+=ze(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}function li(t){var e=Le(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function Io(t){return["html","body","#document"].indexOf(ye(t))>=0?t.ownerDocument.body:re(t)&&li(t)?t:Io(Sn(t))}function Nt(t,e){var n;e===void 0&&(e=[]);var i=Io(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),r=ne(i),s=o?[r].concat(r.visualViewport||[],li(i)?i:[]):i,a=e.concat(s);return o?a:a.concat(Nt(Sn(s)))}function Gn(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zr(t,e){var n=yt(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Di(t,e,n){return e===Co?Gn(Wr(t,n)):Qe(e)?zr(e,n):Gn(Gr(He(t)))}function Yr(t){var e=Nt(Sn(t)),n=["absolute","fixed"].indexOf(Le(t).position)>=0,i=n&&re(t)?Yt(t):t;return Qe(i)?e.filter(function(o){return Qe(o)&&To(o,i)&&ye(o)!=="body"}):[]}function Xr(t,e,n,i){var o=e==="clippingParents"?Yr(t):[].concat(e),r=[].concat(o,[n]),s=r[0],a=r.reduce(function(l,c){var d=Di(t,c,i);return l.top=ze(d.top,l.top),l.right=yn(d.right,l.right),l.bottom=yn(d.bottom,l.bottom),l.left=ze(d.left,l.left),l},Di(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Mo(t){var e=t.reference,n=t.element,i=t.placement,o=i?ge(i):null,r=i?bt(i):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case J:l={x:s,y:e.y-n.height};break;case se:l={x:s,y:e.y+e.height};break;case ae:l={x:e.x+e.width,y:a};break;case Z:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?ri(o):null;if(c!=null){var d=c==="y"?"height":"width";switch(r){case gt:l[c]=l[c]-(e[d]/2-n[d]/2);break;case $t:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function Ut(t,e){e===void 0&&(e={});var n=e,i=n.placement,o=i===void 0?t.placement:i,r=n.strategy,s=r===void 0?t.strategy:r,a=n.boundary,l=a===void 0?gr:a,c=n.rootBoundary,d=c===void 0?Co:c,p=n.elementContext,f=p===void 0?kt:p,m=n.altBoundary,y=m===void 0?!1:m,b=n.padding,E=b===void 0?0:b,C=Oo(typeof E!="number"?E:Lo(E,zt)),_=f===kt?vr:kt,S=t.rects.popper,u=t.elements[y?_:f],x=Xr(Qe(u)?u:u.contextElement||He(t.elements.popper),l,d,s),h=yt(t.elements.reference),w=Mo({reference:h,element:S,placement:o}),A=Gn(Object.assign({},S,w)),L=f===kt?A:h,v={top:x.top-L.top+C.top,bottom:L.bottom-x.bottom+C.bottom,left:x.left-L.left+C.left,right:L.right-x.right+C.right},T=t.modifiersData.offset;if(f===kt&&T){var O=T[o];Object.keys(v).forEach(function(M){var k=[ae,se].indexOf(M)>=0?1:-1,B=[J,se].indexOf(M)>=0?"y":"x";v[M]+=O[B]*k})}return v}function Kr(t,e){e===void 0&&(e={});var n=e,i=n.placement,o=n.boundary,r=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?_o:l,d=bt(i),p=d?a?Oi:Oi.filter(function(y){return bt(y)===d}):zt,f=p.filter(function(y){return c.indexOf(y)>=0});f.length===0&&(f=p);var m=f.reduce(function(y,b){return y[b]=Ut(t,{placement:b,boundary:o,rootBoundary:r,padding:s})[ge(b)],y},{});return Object.keys(m).sort(function(y,b){return m[y]-m[b]})}function Jr(t){if(ge(t)===ni)return[];var e=mn(t);return[Mi(t),e,Mi(e)]}function Zr(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,d=n.boundary,p=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,y=m===void 0?!0:m,b=n.allowedAutoPlacements,E=e.options.placement,C=ge(E),_=C===E,S=l||(_||!y?[mn(E)]:Jr(E)),u=[E].concat(S).reduce(function(_e,ce){return _e.concat(ge(ce)===ni?Kr(e,{placement:ce,boundary:d,rootBoundary:p,padding:c,flipVariations:y,allowedAutoPlacements:b}):ce)},[]),x=e.rects.reference,h=e.rects.popper,w=new Map,A=!0,L=u[0],v=0;v<u.length;v++){var T=u[v],O=ge(T),M=bt(T)===gt,k=[J,se].indexOf(O)>=0,B=k?"width":"height",N=Ut(e,{placement:T,boundary:d,rootBoundary:p,altBoundary:f,padding:c}),P=k?M?ae:Z:M?se:J;x[B]>h[B]&&(P=mn(P));var U=mn(P),W=[];if(r&&W.push(N[O]<=0),a&&W.push(N[P]<=0,N[U]<=0),W.every(function(_e){return _e})){L=T,A=!1;break}w.set(T,W)}if(A)for(var j=y?3:1,z=function(ce){var xe=u.find(function(it){var Se=w.get(it);if(Se)return Se.slice(0,ce).every(function(ot){return ot})});if(xe)return L=xe,"break"},G=j;G>0;G--){var Ce=z(G);if(Ce==="break")break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}}const Qr={name:"flip",enabled:!0,phase:"main",fn:Zr,requiresIfExists:["offset"],data:{_skip:!1}};function Pi(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ki(t){return[J,ae,se,Z].some(function(e){return t[e]>=0})}function es(t){var e=t.state,n=t.name,i=e.rects.reference,o=e.rects.popper,r=e.modifiersData.preventOverflow,s=Ut(e,{elementContext:"reference"}),a=Ut(e,{altBoundary:!0}),l=Pi(s,i),c=Pi(a,o,r),d=ki(l),p=ki(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const ts={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:es};function ns(t,e,n){var i=ge(t),o=[Z,J].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[Z,ae].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function is(t){var e=t.state,n=t.options,i=t.name,o=n.offset,r=o===void 0?[0,0]:o,s=_o.reduce(function(d,p){return d[p]=ns(p,e.rects,r),d},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}const os={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:is};function rs(t){var e=t.state,n=t.name;e.modifiersData[n]=Mo({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const ss={name:"popperOffsets",enabled:!0,phase:"read",fn:rs,data:{}};function as(t){return t==="x"?"y":"x"}function ls(t){var e=t.state,n=t.options,i=t.name,o=n.mainAxis,r=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,p=n.padding,f=n.tether,m=f===void 0?!0:f,y=n.tetherOffset,b=y===void 0?0:y,E=Ut(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:d}),C=ge(e.placement),_=bt(e.placement),S=!_,u=ri(C),x=as(u),h=e.modifiersData.popperOffsets,w=e.rects.reference,A=e.rects.popper,L=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,v=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(h){if(r){var M,k=u==="y"?J:Z,B=u==="y"?se:ae,N=u==="y"?"height":"width",P=h[u],U=P+E[k],W=P-E[B],j=m?-A[N]/2:0,z=_===gt?w[N]:A[N],G=_===gt?-A[N]:-w[N],Ce=e.elements.arrow,_e=m&&Ce?oi(Ce):{width:0,height:0},ce=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ao(),xe=ce[k],it=ce[B],Se=Bt(0,w[N],_e[N]),ot=S?w[N]/2-j-Se-xe-v.mainAxis:z-Se-xe-v.mainAxis,ke=S?-w[N]/2+j+Se+it+v.mainAxis:G+Se+it+v.mainAxis,rt=e.elements.arrow&&Yt(e.elements.arrow),Zt=rt?u==="y"?rt.clientTop||0:rt.clientLeft||0:0,Lt=(M=T?.[u])!=null?M:0,Qt=P+ot-Lt-Zt,en=P+ke-Lt,It=Bt(m?yn(U,Qt):U,P,m?ze(W,en):W);h[u]=It,O[u]=It-P}if(a){var Mt,tn=u==="x"?J:Z,nn=u==="x"?se:ae,Te=h[x],Re=x==="y"?"height":"width",Dt=Te+E[tn],Ue=Te-E[nn],Pt=[J,Z].indexOf(C)!==-1,on=(Mt=T?.[x])!=null?Mt:0,rn=Pt?Dt:Te-w[Re]-A[Re]-on+v.altAxis,sn=Pt?Te+w[Re]+A[Re]-on-v.altAxis:Ue,an=m&&Pt?Dr(rn,Te,sn):Bt(m?rn:Dt,Te,m?sn:Ue);h[x]=an,O[x]=an-Te}e.modifiersData[i]=O}}const cs={name:"preventOverflow",enabled:!0,phase:"main",fn:ls,requiresIfExists:["offset"]};function us(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ds(t){return t===ne(t)||!re(t)?si(t):us(t)}function fs(t){var e=t.getBoundingClientRect(),n=vt(e.width)/t.offsetWidth||1,i=vt(e.height)/t.offsetHeight||1;return n!==1||i!==1}function ps(t,e,n){n===void 0&&(n=!1);var i=re(e),o=re(e)&&fs(e),r=He(e),s=yt(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ye(e)!=="body"||li(r))&&(a=ds(e)),re(e)?(l=yt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=ai(r))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function hs(t){var e=new Map,n=new Set,i=[];t.forEach(function(r){e.set(r.name,r)});function o(r){n.add(r.name);var s=[].concat(r.requires||[],r.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),i.push(r)}return t.forEach(function(r){n.has(r.name)||o(r)}),i}function ms(t){var e=hs(t);return Ar.reduce(function(n,i){return n.concat(e.filter(function(o){return o.phase===i}))},[])}function gs(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function vs(t){var e=t.reduce(function(n,i){var o=n[i.name];return n[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Ri={placement:"bottom",modifiers:[],strategy:"absolute"};function Bi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ys(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,o=e.defaultOptions,r=o===void 0?Ri:o;return function(a,l,c){c===void 0&&(c=r);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ri,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,m={state:d,setOptions:function(C){var _=typeof C=="function"?C(d.options):C;b(),d.options=Object.assign({},r,d.options,_),d.scrollParents={reference:Qe(a)?Nt(a):a.contextElement?Nt(a.contextElement):[],popper:Nt(l)};var S=ms(vs([].concat(i,d.options.modifiers)));return d.orderedModifiers=S.filter(function(u){return u.enabled}),y(),m.update()},forceUpdate:function(){if(!f){var C=d.elements,_=C.reference,S=C.popper;if(Bi(_,S)){d.rects={reference:ps(_,Yt(S),d.options.strategy==="fixed"),popper:oi(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(v){return d.modifiersData[v.name]=Object.assign({},v.data)});for(var u=0;u<d.orderedModifiers.length;u++){if(d.reset===!0){d.reset=!1,u=-1;continue}var x=d.orderedModifiers[u],h=x.fn,w=x.options,A=w===void 0?{}:w,L=x.name;typeof h=="function"&&(d=h({state:d,options:A,name:L,instance:m})||d)}}}},update:gs(function(){return new Promise(function(E){m.forceUpdate(),E(d)})}),destroy:function(){b(),f=!0}};if(!Bi(a,l))return m;m.setOptions(c).then(function(E){!f&&c.onFirstUpdate&&c.onFirstUpdate(E)});function y(){d.orderedModifiers.forEach(function(E){var C=E.name,_=E.options,S=_===void 0?{}:_,u=E.effect;if(typeof u=="function"){var x=u({state:d,name:C,instance:m,options:S}),h=function(){};p.push(x||h)}})}function b(){p.forEach(function(E){return E()}),p=[]}return m}}var bs=[Ur,ss,Vr,xo,os,Qr,cs,Br,ts],ws=ys({defaultModifiers:bs}),Es="tippy-box",Do="tippy-content",Cs="tippy-backdrop",Po="tippy-arrow",ko="tippy-svg-arrow",qe={passive:!0,capture:!0},Ro=function(){return document.body};function Pn(t,e,n){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(n)?n[e]:n)}return t}function ci(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Bo(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Ni(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function _s(t){return t.split(/\s+/).filter(Boolean)}function ut(t){return[].concat(t)}function Hi(t,e){t.indexOf(e)===-1&&t.push(e)}function xs(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ss(t){return t.split("-")[0]}function bn(t){return[].slice.call(t)}function Fi(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ht(){return document.createElement("div")}function Tn(t){return["Element","Fragment"].some(function(e){return ci(t,e)})}function Ts(t){return ci(t,"NodeList")}function As(t){return ci(t,"MouseEvent")}function Os(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Ls(t){return Tn(t)?[t]:Ts(t)?bn(t):Array.isArray(t)?t:bn(document.querySelectorAll(t))}function kn(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Vi(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Is(t){var e,n=ut(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function Ms(t,e){var n=e.clientX,i=e.clientY;return t.every(function(o){var r=o.popperRect,s=o.popperState,a=o.props,l=a.interactiveBorder,c=Ss(s.placement),d=s.modifiersData.offset;if(!d)return!0;var p=c==="bottom"?d.top.y:0,f=c==="top"?d.bottom.y:0,m=c==="right"?d.left.x:0,y=c==="left"?d.right.x:0,b=r.top-i+p>l,E=i-r.bottom-f>l,C=r.left-n+m>l,_=n-r.right-y>l;return b||E||C||_})}function Rn(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[i](o,n)})}function $i(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var he={isTouch:!1},Ui=0;function Ds(){he.isTouch||(he.isTouch=!0,window.performance&&document.addEventListener("mousemove",No))}function No(){var t=performance.now();t-Ui<20&&(he.isTouch=!1,document.removeEventListener("mousemove",No)),Ui=t}function Ps(){var t=document.activeElement;if(Os(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function ks(){document.addEventListener("touchstart",Ds,qe),window.addEventListener("blur",Ps)}var Rs=typeof window<"u"&&typeof document<"u",Bs=Rs?!!window.msCrypto:!1,Ns={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Hs={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ue=Object.assign({appendTo:Ro,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ns,Hs),Fs=Object.keys(ue),Vs=function(e){var n=Object.keys(e);n.forEach(function(i){ue[i]=e[i]})};function Ho(t){var e=t.plugins||[],n=e.reduce(function(i,o){var r=o.name,s=o.defaultValue;if(r){var a;i[r]=t[r]!==void 0?t[r]:(a=ue[r])!=null?a:s}return i},{});return Object.assign({},t,n)}function $s(t,e){var n=e?Object.keys(Ho(Object.assign({},ue,{plugins:e}))):Fs,i=n.reduce(function(o,r){var s=(t.getAttribute("data-tippy-"+r)||"").trim();if(!s)return o;if(r==="content")o[r]=s;else try{o[r]=JSON.parse(s)}catch{o[r]=s}return o},{});return i}function ji(t,e){var n=Object.assign({},e,{content:Bo(e.content,[t])},e.ignoreAttributes?{}:$s(t,e.plugins));return n.aria=Object.assign({},ue.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Us=function(){return"innerHTML"};function zn(t,e){t[Us()]=e}function qi(t){var e=Ht();return t===!0?e.className=Po:(e.className=ko,Tn(t)?e.appendChild(t):zn(e,t)),e}function Wi(t,e){Tn(e.content)?(zn(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?zn(t,e.content):t.textContent=e.content)}function Yn(t){var e=t.firstElementChild,n=bn(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(Do)}),arrow:n.find(function(i){return i.classList.contains(Po)||i.classList.contains(ko)}),backdrop:n.find(function(i){return i.classList.contains(Cs)})}}function Fo(t){var e=Ht(),n=Ht();n.className=Es,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Ht();i.className=Do,i.setAttribute("data-state","hidden"),Wi(i,t.props),e.appendChild(n),n.appendChild(i),o(t.props,t.props);function o(r,s){var a=Yn(e),l=a.box,c=a.content,d=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(r.content!==s.content||r.allowHTML!==s.allowHTML)&&Wi(c,t.props),s.arrow?d?r.arrow!==s.arrow&&(l.removeChild(d),l.appendChild(qi(s.arrow))):l.appendChild(qi(s.arrow)):d&&l.removeChild(d)}return{popper:e,onUpdate:o}}Fo.$$tippy=!0;var js=1,dn=[],Bn=[];function qs(t,e){var n=ji(t,Object.assign({},ue,Ho(Fi(e)))),i,o,r,s=!1,a=!1,l=!1,c=!1,d,p,f,m=[],y=Ni(Qt,n.interactiveDebounce),b,E=js++,C=null,_=xs(n.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},u={id:E,reference:t,popper:Ht(),popperInstance:C,props:n,state:S,plugins:_,clearDelayTimeouts:rn,setProps:sn,setContent:an,show:ur,hide:dr,hideWithInteractivity:fr,enable:Pt,disable:on,unmount:pr,destroy:hr};if(!n.render)return u;var x=n.render(u),h=x.popper,w=x.onUpdate;h.setAttribute("data-tippy-root",""),h.id="tippy-"+u.id,u.popper=h,t._tippy=u,h._tippy=u;var A=_.map(function(g){return g.fn(u)}),L=t.hasAttribute("aria-expanded");return rt(),j(),P(),U("onCreate",[u]),n.showOnCreate&&Dt(),h.addEventListener("mouseenter",function(){u.props.interactive&&u.state.isVisible&&u.clearDelayTimeouts()}),h.addEventListener("mouseleave",function(){u.props.interactive&&u.props.trigger.indexOf("mouseenter")>=0&&k().addEventListener("mousemove",y)}),u;function v(){var g=u.props.touch;return Array.isArray(g)?g:[g,0]}function T(){return v()[0]==="hold"}function O(){var g;return!!((g=u.props.render)!=null&&g.$$tippy)}function M(){return b||t}function k(){var g=M().parentNode;return g?Is(g):document}function B(){return Yn(h)}function N(g){return u.state.isMounted&&!u.state.isVisible||he.isTouch||d&&d.type==="focus"?0:Pn(u.props.delay,g?0:1,ue.delay)}function P(g){g===void 0&&(g=!1),h.style.pointerEvents=u.props.interactive&&!g?"":"none",h.style.zIndex=""+u.props.zIndex}function U(g,I,D){if(D===void 0&&(D=!0),A.forEach(function(R){R[g]&&R[g].apply(R,I)}),D){var H;(H=u.props)[g].apply(H,I)}}function W(){var g=u.props.aria;if(g.content){var I="aria-"+g.content,D=h.id,H=ut(u.props.triggerTarget||t);H.forEach(function(R){var K=R.getAttribute(I);if(u.state.isVisible)R.setAttribute(I,K?K+" "+D:D);else{var oe=K&&K.replace(D,"").trim();oe?R.setAttribute(I,oe):R.removeAttribute(I)}})}}function j(){if(!(L||!u.props.aria.expanded)){var g=ut(u.props.triggerTarget||t);g.forEach(function(I){u.props.interactive?I.setAttribute("aria-expanded",u.state.isVisible&&I===M()?"true":"false"):I.removeAttribute("aria-expanded")})}}function z(){k().removeEventListener("mousemove",y),dn=dn.filter(function(g){return g!==y})}function G(g){if(!(he.isTouch&&(l||g.type==="mousedown"))){var I=g.composedPath&&g.composedPath()[0]||g.target;if(!(u.props.interactive&&$i(h,I))){if(ut(u.props.triggerTarget||t).some(function(D){return $i(D,I)})){if(he.isTouch||u.state.isVisible&&u.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[u,g]);u.props.hideOnClick===!0&&(u.clearDelayTimeouts(),u.hide(),a=!0,setTimeout(function(){a=!1}),u.state.isMounted||xe())}}}function Ce(){l=!0}function _e(){l=!1}function ce(){var g=k();g.addEventListener("mousedown",G,!0),g.addEventListener("touchend",G,qe),g.addEventListener("touchstart",_e,qe),g.addEventListener("touchmove",Ce,qe)}function xe(){var g=k();g.removeEventListener("mousedown",G,!0),g.removeEventListener("touchend",G,qe),g.removeEventListener("touchstart",_e,qe),g.removeEventListener("touchmove",Ce,qe)}function it(g,I){ot(g,function(){!u.state.isVisible&&h.parentNode&&h.parentNode.contains(h)&&I()})}function Se(g,I){ot(g,I)}function ot(g,I){var D=B().box;function H(R){R.target===D&&(Rn(D,"remove",H),I())}if(g===0)return I();Rn(D,"remove",p),Rn(D,"add",H),p=H}function ke(g,I,D){D===void 0&&(D=!1);var H=ut(u.props.triggerTarget||t);H.forEach(function(R){R.addEventListener(g,I,D),m.push({node:R,eventType:g,handler:I,options:D})})}function rt(){T()&&(ke("touchstart",Lt,{passive:!0}),ke("touchend",en,{passive:!0})),_s(u.props.trigger).forEach(function(g){if(g!=="manual")switch(ke(g,Lt),g){case"mouseenter":ke("mouseleave",en);break;case"focus":ke(Bs?"focusout":"blur",It);break;case"focusin":ke("focusout",It);break}})}function Zt(){m.forEach(function(g){var I=g.node,D=g.eventType,H=g.handler,R=g.options;I.removeEventListener(D,H,R)}),m=[]}function Lt(g){var I,D=!1;if(!(!u.state.isEnabled||Mt(g)||a)){var H=((I=d)==null?void 0:I.type)==="focus";d=g,b=g.currentTarget,j(),!u.state.isVisible&&As(g)&&dn.forEach(function(R){return R(g)}),g.type==="click"&&(u.props.trigger.indexOf("mouseenter")<0||s)&&u.props.hideOnClick!==!1&&u.state.isVisible?D=!0:Dt(g),g.type==="click"&&(s=!D),D&&!H&&Ue(g)}}function Qt(g){var I=g.target,D=M().contains(I)||h.contains(I);if(!(g.type==="mousemove"&&D)){var H=Re().concat(h).map(function(R){var K,oe=R._tippy,st=(K=oe.popperInstance)==null?void 0:K.state;return st?{popperRect:R.getBoundingClientRect(),popperState:st,props:n}:null}).filter(Boolean);Ms(H,g)&&(z(),Ue(g))}}function en(g){var I=Mt(g)||u.props.trigger.indexOf("click")>=0&&s;if(!I){if(u.props.interactive){u.hideWithInteractivity(g);return}Ue(g)}}function It(g){u.props.trigger.indexOf("focusin")<0&&g.target!==M()||u.props.interactive&&g.relatedTarget&&h.contains(g.relatedTarget)||Ue(g)}function Mt(g){return he.isTouch?T()!==g.type.indexOf("touch")>=0:!1}function tn(){nn();var g=u.props,I=g.popperOptions,D=g.placement,H=g.offset,R=g.getReferenceClientRect,K=g.moveTransition,oe=O()?Yn(h).arrow:null,st=R?{getBoundingClientRect:R,contextElement:R.contextElement||M()}:t,Ai={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ln){var at=ln.state;if(O()){var mr=B(),Dn=mr.box;["placement","reference-hidden","escaped"].forEach(function(cn){cn==="placement"?Dn.setAttribute("data-placement",at.placement):at.attributes.popper["data-popper-"+cn]?Dn.setAttribute("data-"+cn,""):Dn.removeAttribute("data-"+cn)}),at.attributes.popper={}}}},je=[{name:"offset",options:{offset:H}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!K}},Ai];O()&&oe&&je.push({name:"arrow",options:{element:oe,padding:3}}),je.push.apply(je,I?.modifiers||[]),u.popperInstance=ws(st,h,Object.assign({},I,{placement:D,onFirstUpdate:f,modifiers:je}))}function nn(){u.popperInstance&&(u.popperInstance.destroy(),u.popperInstance=null)}function Te(){var g=u.props.appendTo,I,D=M();u.props.interactive&&g===Ro||g==="parent"?I=D.parentNode:I=Bo(g,[D]),I.contains(h)||I.appendChild(h),u.state.isMounted=!0,tn()}function Re(){return bn(h.querySelectorAll("[data-tippy-root]"))}function Dt(g){u.clearDelayTimeouts(),g&&U("onTrigger",[u,g]),ce();var I=N(!0),D=v(),H=D[0],R=D[1];he.isTouch&&H==="hold"&&R&&(I=R),I?i=setTimeout(function(){u.show()},I):u.show()}function Ue(g){if(u.clearDelayTimeouts(),U("onUntrigger",[u,g]),!u.state.isVisible){xe();return}if(!(u.props.trigger.indexOf("mouseenter")>=0&&u.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(g.type)>=0&&s)){var I=N(!1);I?o=setTimeout(function(){u.state.isVisible&&u.hide()},I):r=requestAnimationFrame(function(){u.hide()})}}function Pt(){u.state.isEnabled=!0}function on(){u.hide(),u.state.isEnabled=!1}function rn(){clearTimeout(i),clearTimeout(o),cancelAnimationFrame(r)}function sn(g){if(!u.state.isDestroyed){U("onBeforeUpdate",[u,g]),Zt();var I=u.props,D=ji(t,Object.assign({},I,Fi(g),{ignoreAttributes:!0}));u.props=D,rt(),I.interactiveDebounce!==D.interactiveDebounce&&(z(),y=Ni(Qt,D.interactiveDebounce)),I.triggerTarget&&!D.triggerTarget?ut(I.triggerTarget).forEach(function(H){H.removeAttribute("aria-expanded")}):D.triggerTarget&&t.removeAttribute("aria-expanded"),j(),P(),w&&w(I,D),u.popperInstance&&(tn(),Re().forEach(function(H){requestAnimationFrame(H._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[u,g])}}function an(g){u.setProps({content:g})}function ur(){var g=u.state.isVisible,I=u.state.isDestroyed,D=!u.state.isEnabled,H=he.isTouch&&!u.props.touch,R=Pn(u.props.duration,0,ue.duration);if(!(g||I||D||H)&&!M().hasAttribute("disabled")&&(U("onShow",[u],!1),u.props.onShow(u)!==!1)){if(u.state.isVisible=!0,O()&&(h.style.visibility="visible"),P(),ce(),u.state.isMounted||(h.style.transition="none"),O()){var K=B(),oe=K.box,st=K.content;kn([oe,st],0)}f=function(){var je;if(!(!u.state.isVisible||c)){if(c=!0,h.offsetHeight,h.style.transition=u.props.moveTransition,O()&&u.props.animation){var Mn=B(),ln=Mn.box,at=Mn.content;kn([ln,at],R),Vi([ln,at],"visible")}W(),j(),Hi(Bn,u),(je=u.popperInstance)==null||je.forceUpdate(),U("onMount",[u]),u.props.animation&&O()&&Se(R,function(){u.state.isShown=!0,U("onShown",[u])})}},Te()}}function dr(){var g=!u.state.isVisible,I=u.state.isDestroyed,D=!u.state.isEnabled,H=Pn(u.props.duration,1,ue.duration);if(!(g||I||D)&&(U("onHide",[u],!1),u.props.onHide(u)!==!1)){if(u.state.isVisible=!1,u.state.isShown=!1,c=!1,s=!1,O()&&(h.style.visibility="hidden"),z(),xe(),P(!0),O()){var R=B(),K=R.box,oe=R.content;u.props.animation&&(kn([K,oe],H),Vi([K,oe],"hidden"))}W(),j(),u.props.animation?O()&&it(H,u.unmount):u.unmount()}}function fr(g){k().addEventListener("mousemove",y),Hi(dn,y),y(g)}function pr(){u.state.isVisible&&u.hide(),u.state.isMounted&&(nn(),Re().forEach(function(g){g._tippy.unmount()}),h.parentNode&&h.parentNode.removeChild(h),Bn=Bn.filter(function(g){return g!==u}),u.state.isMounted=!1,U("onHidden",[u]))}function hr(){u.state.isDestroyed||(u.clearDelayTimeouts(),u.unmount(),Zt(),delete t._tippy,u.state.isDestroyed=!0,U("onDestroy",[u]))}}function Xt(t,e){e===void 0&&(e={});var n=ue.plugins.concat(e.plugins||[]);ks();var i=Object.assign({},e,{plugins:n}),o=Ls(t),r=o.reduce(function(s,a){var l=a&&qs(a,i);return l&&s.push(l),s},[]);return Tn(t)?r[0]:r}Xt.defaultProps=ue;Xt.setDefaultProps=Vs;Xt.currentInput=he;Object.assign({},xo,{effect:function(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}});Xt.setDefaultProps({render:Fo});function Ws(t){return t instanceof Element}function wt(t){return t instanceof HTMLElement}function Be(t){return typeof t=="function"}function jt(t){return typeof t=="string"}function X(t){return t===void 0}class ui{on(e,n,i,o=!1){var r;return X(this.bindings)&&(this.bindings={}),X(this.bindings[e])&&(this.bindings[e]=[]),(r=this.bindings[e])==null||r.push({handler:n,ctx:i,once:o}),this}once(e,n,i){return this.on(e,n,i,!0)}off(e,n){if(X(this.bindings)||X(this.bindings[e]))return this;if(X(n))delete this.bindings[e];else{var i;(i=this.bindings[e])==null||i.forEach((o,r)=>{if(o.handler===n){var s;(s=this.bindings[e])==null||s.splice(r,1)}})}return this}trigger(e,...n){if(!X(this.bindings)&&this.bindings[e]){var i;(i=this.bindings[e])==null||i.forEach((o,r)=>{const{ctx:s,handler:a,once:l}=o,c=s||this;if(a.apply(c,n),l){var d;(d=this.bindings[e])==null||d.splice(r,1)}})}return this}}function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Q.apply(null,arguments)}function di(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}const Fe={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};Fe.defaultMerge;function Gs(t,e){return e}function zs(t,e){return t.filter(n=>n!==void 0)}var Gi;(function(t){t[t.NOT=0]="NOT",t[t.RECORD=1]="RECORD",t[t.ARRAY=2]="ARRAY",t[t.SET=3]="SET",t[t.MAP=4]="MAP",t[t.OTHER=5]="OTHER"})(Gi||(Gi={}));function zi(t){return typeof t!="object"||t===null?0:Array.isArray(t)?2:Ks(t)?1:t instanceof Set?3:t instanceof Map?4:5}function Ys(t){const e=new Set;for(const n of t)for(const i of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])e.add(i);return e}function Xs(t,e){return typeof t=="object"&&Object.prototype.propertyIsEnumerable.call(t,e)}function Vo(t){return{*[Symbol.iterator](){for(const e of t)for(const n of e)yield n}}}const Yi=new Set(["[object Object]","[object Module]"]);function Ks(t){if(!Yi.has(Object.prototype.toString.call(t)))return!1;const{constructor:e}=t;if(e===void 0)return!0;const n=e.prototype;return!(n===null||typeof n!="object"||!Yi.has(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function Js(t,e,n){const i={};for(const o of Ys(t)){const r=[];for(const l of t)Xs(l,o)&&r.push(l[o]);if(r.length===0)continue;const s=e.metaDataUpdater(n,{key:o,parents:t}),a=$o(r,e,s);a!==Fe.skip&&(o==="__proto__"?Object.defineProperty(i,o,{value:a,configurable:!0,enumerable:!0,writable:!0}):i[o]=a)}return i}function Zs(t){return t.flat()}function Qs(t){return new Set(Vo(t))}function ea(t){return new Map(Vo(t))}function ta(t){return t.at(-1)}const fn={mergeRecords:Js,mergeArrays:Zs,mergeSets:Qs,mergeMaps:ea,mergeOthers:ta};function fi(...t){return na({})(...t)}function na(t,e){const n=ia(t,i);function i(...o){return $o(o,n,e)}return i}function ia(t,e){var n,i,o;return{defaultMergeFunctions:fn,mergeFunctions:Q({},fn,Object.fromEntries(Object.entries(t).filter(([r,s])=>Object.hasOwn(fn,r)).map(([r,s])=>s===!1?[r,fn.mergeOthers]:[r,s]))),metaDataUpdater:(n=t.metaDataUpdater)!=null?n:Gs,deepmerge:e,useImplicitDefaultMerging:(i=t.enableImplicitDefaultMerging)!=null?i:!1,filterValues:t.filterValues===!1?void 0:(o=t.filterValues)!=null?o:zs,actions:Fe}}function $o(t,e,n){var i;const o=(i=e.filterValues==null?void 0:e.filterValues(t,n))!=null?i:t;if(o.length===0)return;if(o.length===1)return Nn(o,e,n);const r=zi(o[0]);if(r!==0&&r!==5){for(let s=1;s<o.length;s++)if(zi(o[s])!==r)return Nn(o,e,n)}switch(r){case 1:return oa(o,e,n);case 2:return ra(o,e,n);case 3:return sa(o,e,n);case 4:return aa(o,e,n);default:return Nn(o,e,n)}}function oa(t,e,n){const i=e.mergeFunctions.mergeRecords(t,e,n);return i===Fe.defaultMerge||e.useImplicitDefaultMerging&&i===void 0&&e.mergeFunctions.mergeRecords!==e.defaultMergeFunctions.mergeRecords?e.defaultMergeFunctions.mergeRecords(t,e,n):i}function ra(t,e,n){const i=e.mergeFunctions.mergeArrays(t,e,n);return i===Fe.defaultMerge||e.useImplicitDefaultMerging&&i===void 0&&e.mergeFunctions.mergeArrays!==e.defaultMergeFunctions.mergeArrays?e.defaultMergeFunctions.mergeArrays(t):i}function sa(t,e,n){const i=e.mergeFunctions.mergeSets(t,e,n);return i===Fe.defaultMerge||e.useImplicitDefaultMerging&&i===void 0&&e.mergeFunctions.mergeSets!==e.defaultMergeFunctions.mergeSets?e.defaultMergeFunctions.mergeSets(t):i}function aa(t,e,n){const i=e.mergeFunctions.mergeMaps(t,e,n);return i===Fe.defaultMerge||e.useImplicitDefaultMerging&&i===void 0&&e.mergeFunctions.mergeMaps!==e.defaultMergeFunctions.mergeMaps?e.defaultMergeFunctions.mergeMaps(t):i}function Nn(t,e,n){const i=e.mergeFunctions.mergeOthers(t,e,n);return i===Fe.defaultMerge||e.useImplicitDefaultMerging&&i===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(t):i}function pi(t){const e=Object.getOwnPropertyNames(t.constructor.prototype);for(let n=0;n<e.length;n++){const i=e[n],o=t[i];i!=="constructor"&&typeof o=="function"&&(t[i]=o.bind(t))}return t}function la(t,e){return n=>{if(t.isOpen()){const i=t.el&&n.currentTarget===t.el;(!X(e)&&n.currentTarget.matches(e)||i)&&t.tour.next()}}}function ca(t){const{event:e,selector:n}=t.options.advanceOn||{};if(e){const i=la(t,n);let o=null;if(!X(n)&&(o=document.querySelector(n),!o))return console.error(`No element was found for the selector supplied to advanceOn: ${n}`);o?(o.addEventListener(e,i),t.on("destroy",()=>o.removeEventListener(e,i))):(document.body.addEventListener(e,i,!0),t.on("destroy",()=>document.body.removeEventListener(e,i,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}class ua{constructor(e){}}class da{constructor(e,n){}}function Uo(t){return!jt(t)||t===""?"":t.charAt(t.length-1)!=="-"?`${t}-`:t}function fa(t){const e=t.options.attachTo||{},n=Object.assign({},e);if(Be(n.element)&&(n.element=n.element.call(t)),jt(n.element)){try{n.element=document.querySelector(n.element)}catch{}n.element||console.error(`The element for this Shepherd step was not found ${e.element}`)}return n}function pa(t){return t.options.extraHighlights?t.options.extraHighlights.flatMap(e=>Array.from(document.querySelectorAll(e))):[]}function jo(t){return t==null?!0:!t.element||!t.on}function qo(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e=="x"?n:n&3|8).toString(16)})}const ha=["top","right","bottom","left"],Xi=["start","end"],Ki=ha.reduce((t,e)=>t.concat(e,e+"-"+Xi[0],e+"-"+Xi[1]),[]),Et=Math.min,Ye=Math.max,wn=Math.round,pn=Math.floor,ve=t=>({x:t,y:t}),ma={left:"right",right:"left",bottom:"top",top:"bottom"},ga={start:"end",end:"start"};function Xn(t,e,n){return Ye(t,Et(e,n))}function et(t,e){return typeof t=="function"?t(e):t}function Ie(t){return t.split("-")[0]}function Oe(t){return t.split("-")[1]}function hi(t){return t==="x"?"y":"x"}function mi(t){return t==="y"?"height":"width"}function Xe(t){return["top","bottom"].includes(Ie(t))?"y":"x"}function gi(t){return hi(Xe(t))}function Wo(t,e,n){n===void 0&&(n=!1);const i=Oe(t),o=gi(t),r=mi(o);let s=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(s=Cn(s)),[s,Cn(s)]}function va(t){const e=Cn(t);return[En(t),e,En(e)]}function En(t){return t.replace(/start|end/g,e=>ga[e])}function ya(t,e,n){const i=["left","right"],o=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:i:e?i:o;case"left":case"right":return e?r:s;default:return[]}}function ba(t,e,n,i){const o=Oe(t);let r=ya(Ie(t),n==="start",i);return o&&(r=r.map(s=>s+"-"+o),e&&(r=r.concat(r.map(En)))),r}function Cn(t){return t.replace(/left|right|bottom|top/g,e=>ma[e])}function wa(t){return Q({top:0,right:0,bottom:0,left:0},t)}function Go(t){return typeof t!="number"?wa(t):{top:t,right:t,bottom:t,left:t}}function _n(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}const Ea=["crossAxis","alignment","allowedPlacements","autoAlignment"],Ca=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],_a=["mainAxis","crossAxis","limiter"];function Ji(t,e,n){let{reference:i,floating:o}=t;const r=Xe(e),s=gi(e),a=mi(s),l=Ie(e),c=r==="y",d=i.x+i.width/2-o.width/2,p=i.y+i.height/2-o.height/2,f=i[a]/2-o[a]/2;let m;switch(l){case"top":m={x:d,y:i.y-o.height};break;case"bottom":m={x:d,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:p};break;case"left":m={x:i.x-o.width,y:p};break;default:m={x:i.x,y:i.y}}switch(Oe(e)){case"start":m[s]-=f*(n&&c?-1:1);break;case"end":m[s]+=f*(n&&c?-1:1);break}return m}const xa=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:r=[],platform:s}=n,a=r.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:p}=Ji(c,i,l),f=i,m={},y=0;for(let b=0;b<a.length;b++){const{name:E,fn:C}=a[b],{x:_,y:S,data:u,reset:x}=await C({x:d,y:p,initialPlacement:i,placement:f,strategy:o,middlewareData:m,rects:c,platform:s,elements:{reference:t,floating:e}});d=_??d,p=S??p,m=Q({},m,{[E]:Q({},m[E],u)}),x&&y<=50&&(y++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(c=x.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):x.rects),{x:d,y:p}=Ji(c,f,l)),b=-1)}return{x:d,y:p,placement:f,strategy:o,middlewareData:m}};async function vi(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:r,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:f=!1,padding:m=0}=et(e,t),y=Go(m),E=a[f?p==="floating"?"reference":"floating":p],C=_n(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(E)))==null||n?E:E.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=p==="floating"?{x:i,y:o,width:s.floating.width,height:s.floating.height}:s.reference,S=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),u=await(r.isElement==null?void 0:r.isElement(S))?await(r.getScale==null?void 0:r.getScale(S))||{x:1,y:1}:{x:1,y:1},x=_n(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:S,strategy:l}):_);return{top:(C.top-x.top+y.top)/u.y,bottom:(x.bottom-C.bottom+y.bottom)/u.y,left:(C.left-x.left+y.left)/u.x,right:(x.right-C.right+y.right)/u.x}}const Sa=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:o,rects:r,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=et(t,e)||{};if(c==null)return{};const p=Go(d),f={x:n,y:i},m=gi(o),y=mi(m),b=await s.getDimensions(c),E=m==="y",C=E?"top":"left",_=E?"bottom":"right",S=E?"clientHeight":"clientWidth",u=r.reference[y]+r.reference[m]-f[m]-r.floating[y],x=f[m]-r.reference[m],h=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let w=h?h[S]:0;(!w||!await(s.isElement==null?void 0:s.isElement(h)))&&(w=a.floating[S]||r.floating[y]);const A=u/2-x/2,L=w/2-b[y]/2-1,v=Et(p[C],L),T=Et(p[_],L),O=v,M=w-b[y]-T,k=w/2-b[y]/2+A,B=Xn(O,k,M),N=!l.arrow&&Oe(o)!=null&&k!==B&&r.reference[y]/2-(k<O?v:T)-b[y]/2<0,P=N?k<O?k-O:k-M:0;return{[m]:f[m]+P,data:Q({[m]:B,centerOffset:k-B-P},N&&{alignmentOffset:P}),reset:N}}});function Ta(t,e,n){return(t?[...n.filter(o=>Oe(o)===t),...n.filter(o=>Oe(o)!==t)]:n.filter(o=>Ie(o)===o)).filter(o=>t?Oe(o)===t||(e?En(o)!==o:!1):!0)}const Aa=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(n){var i,o,r;const{rects:s,middlewareData:a,placement:l,platform:c,elements:d}=n,p=et(e,n),{crossAxis:f=!1,alignment:m,allowedPlacements:y=Ki,autoAlignment:b=!0}=p,E=di(p,Ea),C=m!==void 0||y===Ki?Ta(m||null,b,y):y,_=await vi(n,E),S=((i=a.autoPlacement)==null?void 0:i.index)||0,u=C[S];if(u==null)return{};const x=Wo(u,s,await(c.isRTL==null?void 0:c.isRTL(d.floating)));if(l!==u)return{reset:{placement:C[0]}};const h=[_[Ie(u)],_[x[0]],_[x[1]]],w=[...((o=a.autoPlacement)==null?void 0:o.overflows)||[],{placement:u,overflows:h}],A=C[S+1];if(A)return{data:{index:S+1,overflows:w},reset:{placement:A}};const L=w.map(O=>{const M=Oe(O.placement);return[O.placement,M&&f?O.overflows.slice(0,2).reduce((k,B)=>k+B,0):O.overflows[0],O.overflows]}).sort((O,M)=>O[1]-M[1]),T=((r=L.filter(O=>O[2].slice(0,Oe(O[0])?2:3).every(M=>M<=0))[0])==null?void 0:r[0])||L[0][0];return T!==l?{data:{index:S+1,overflows:w},reset:{placement:T}}:{}}}},Oa=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,o;const{placement:r,middlewareData:s,rects:a,initialPlacement:l,platform:c,elements:d}=n,p=et(e,n),{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:C=!0}=p,_=di(p,Ca);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const S=Ie(r),u=Xe(l),x=Ie(l)===l,h=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=y||(x||!C?[Cn(l)]:va(l)),A=E!=="none";!y&&A&&w.push(...ba(l,C,E,h));const L=[l,...w],v=await vi(n,_),T=[];let O=((o=s.flip)==null?void 0:o.overflows)||[];if(f&&T.push(v[S]),m){const P=Wo(r,a,h);T.push(v[P[0]],v[P[1]])}if(O=[...O,{placement:r,overflows:T}],!T.every(P=>P<=0)){var M,k;const P=(((M=s.flip)==null?void 0:M.index)||0)+1,U=L[P];if(U){var B;const j=m==="alignment"?u!==Xe(U):!1,z=((B=O[0])==null?void 0:B.overflows[0])>0;if(!j||z)return{data:{index:P,overflows:O},reset:{placement:U}}}let W=(k=O.filter(j=>j.overflows[0]<=0).sort((j,z)=>j.overflows[1]-z.overflows[1])[0])==null?void 0:k.placement;if(!W)switch(b){case"bestFit":{var N;const j=(N=O.filter(z=>{if(A){const G=Xe(z.placement);return G===u||G==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,Ce)=>G+Ce,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:N[0];j&&(W=j);break}case"initialPlacement":W=l;break}if(r!==W)return{reset:{placement:W}}}return{}}}},La=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:o,placement:r}=n,s=et(e,n),{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:_=>{let{x:S,y:u}=_;return{x:S,y:u}}}}=s,d=di(s,_a),p={x:i,y:o},f=await vi(n,d),m=Xe(Ie(r)),y=hi(m);let b=p[y],E=p[m];if(a){const _=y==="y"?"top":"left",S=y==="y"?"bottom":"right",u=b+f[_],x=b-f[S];b=Xn(u,b,x)}if(l){const _=m==="y"?"top":"left",S=m==="y"?"bottom":"right",u=E+f[_],x=E-f[S];E=Xn(u,E,x)}const C=c.fn(Q({},n,{[y]:b,[m]:E}));return Q({},C,{data:{x:C.x-i,y:C.y-o,enabled:{[y]:a,[m]:l}}})}}},Ia=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:i,y:o,placement:r,rects:s,middlewareData:a}=n,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=et(e,n),p={x:i,y:o},f=Xe(r),m=hi(f);let y=p[m],b=p[f];const E=et(l,n),C=typeof E=="number"?{mainAxis:E,crossAxis:0}:Q({mainAxis:0,crossAxis:0},E);if(c){const u=m==="y"?"height":"width",x=s.reference[m]-s.floating[u]+C.mainAxis,h=s.reference[m]+s.reference[u]-C.mainAxis;y<x?y=x:y>h&&(y=h)}if(d){var _,S;const u=m==="y"?"width":"height",x=["top","left"].includes(Ie(r)),h=s.reference[f]-s.floating[u]+(x&&((_=a.offset)==null?void 0:_[f])||0)+(x?0:C.crossAxis),w=s.reference[f]+s.reference[u]+(x?0:((S=a.offset)==null?void 0:S[f])||0)-(x?C.crossAxis:0);b<h?b=h:b>w&&(b=w)}return{[m]:y,[f]:b}}}};function An(){return typeof window<"u"}function Ot(t){return zo(t)?(t.nodeName||"").toLowerCase():"#document"}function te(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ee(t){var e;return(e=(zo(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zo(t){return An()?t instanceof Node||t instanceof te(t).Node:!1}function de(t){return An()?t instanceof Element||t instanceof te(t).Element:!1}function be(t){return An()?t instanceof HTMLElement||t instanceof te(t).HTMLElement:!1}function Zi(t){return!An()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof te(t).ShadowRoot}function Kt(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=fe(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(o)}function Ma(t){return["table","td","th"].includes(Ot(t))}function On(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function yi(t){const e=bi(),n=de(t)?fe(t):t;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Da(t){let e=Ne(t);for(;be(e)&&!Ct(e);){if(yi(e))return e;if(On(e))return null;e=Ne(e)}return null}function bi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ct(t){return["html","body","#document"].includes(Ot(t))}function fe(t){return te(t).getComputedStyle(t)}function Ln(t){return de(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ne(t){if(Ot(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Zi(t)&&t.host||Ee(t);return Zi(e)?e.host:e}function Yo(t){const e=Ne(t);return Ct(e)?t.ownerDocument?t.ownerDocument.body:t.body:be(e)&&Kt(e)?e:Yo(e)}function qt(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=Yo(t),r=o===((i=t.ownerDocument)==null?void 0:i.body),s=te(o);if(r){const a=Kn(s);return e.concat(s,s.visualViewport||[],Kt(o)?o:[],a&&n?qt(a):[])}return e.concat(o,qt(o,[],n))}function Kn(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xo(t){const e=fe(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=be(t),r=o?t.offsetWidth:n,s=o?t.offsetHeight:i,a=wn(n)!==r||wn(i)!==s;return a&&(n=r,i=s),{width:n,height:i,$:a}}function wi(t){return de(t)?t:t.contextElement}function pt(t){const e=wi(t);if(!be(e))return ve(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:r}=Xo(e);let s=(r?wn(n.width):n.width)/i,a=(r?wn(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Pa=ve(0);function Ko(t){const e=te(t);return!bi()||!e.visualViewport?Pa:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ka(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==te(t)?!1:e}function tt(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),r=wi(t);let s=ve(1);e&&(i?de(i)&&(s=pt(i)):s=pt(t));const a=ka(r,n,i)?Ko(r):ve(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,d=o.width/s.x,p=o.height/s.y;if(r){const f=te(r),m=i&&de(i)?te(i):i;let y=f,b=Kn(y);for(;b&&i&&m!==y;){const E=pt(b),C=b.getBoundingClientRect(),_=fe(b),S=C.left+(b.clientLeft+parseFloat(_.paddingLeft))*E.x,u=C.top+(b.clientTop+parseFloat(_.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,p*=E.y,l+=S,c+=u,y=te(b),b=Kn(y)}}return _n({width:d,height:p,x:l,y:c})}function Ei(t,e){const n=Ln(t).scrollLeft;return e?e.left+n:tt(Ee(t)).left+n}function Jo(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=i.left+e.scrollLeft-(n?0:Ei(t,i)),r=i.top+e.scrollTop;return{x:o,y:r}}function Ra(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const r=o==="fixed",s=Ee(i),a=e?On(e.floating):!1;if(i===s||a&&r)return n;let l={scrollLeft:0,scrollTop:0},c=ve(1);const d=ve(0),p=be(i);if((p||!p&&!r)&&((Ot(i)!=="body"||Kt(s))&&(l=Ln(i)),be(i))){const m=tt(i);c=pt(i),d.x=m.x+i.clientLeft,d.y=m.y+i.clientTop}const f=s&&!p&&!r?Jo(s,l,!0):ve(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function Ba(t){return Array.from(t.getClientRects())}function Na(t){const e=Ee(t),n=Ln(t),i=t.ownerDocument.body,o=Ye(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Ye(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+Ei(t);const a=-n.scrollTop;return fe(i).direction==="rtl"&&(s+=Ye(e.clientWidth,i.clientWidth)-o),{width:o,height:r,x:s,y:a}}function Ha(t,e){const n=te(t),i=Ee(t),o=n.visualViewport;let r=i.clientWidth,s=i.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;const c=bi();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a,y:l}}function Fa(t,e){const n=tt(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,r=be(t)?pt(t):ve(1),s=t.clientWidth*r.x,a=t.clientHeight*r.y,l=o*r.x,c=i*r.y;return{width:s,height:a,x:l,y:c}}function Qi(t,e,n){let i;if(e==="viewport")i=Ha(t,n);else if(e==="document")i=Na(Ee(t));else if(de(e))i=Fa(e,n);else{const o=Ko(t);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return _n(i)}function Zo(t,e){const n=Ne(t);return n===e||!de(n)||Ct(n)?!1:fe(n).position==="fixed"||Zo(n,e)}function Va(t,e){const n=e.get(t);if(n)return n;let i=qt(t,[],!1).filter(a=>de(a)&&Ot(a)!=="body"),o=null;const r=fe(t).position==="fixed";let s=r?Ne(t):t;for(;de(s)&&!Ct(s);){const a=fe(s),l=yi(s);!l&&a.position==="fixed"&&(o=null),(r?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Kt(s)&&!l&&Zo(t,s))?i=i.filter(d=>d!==s):o=a,s=Ne(s)}return e.set(t,i),i}function $a(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const s=[...n==="clippingAncestors"?On(e)?[]:Va(e,this._c):[].concat(n),i],a=s[0],l=s.reduce((c,d)=>{const p=Qi(e,d,o);return c.top=Ye(p.top,c.top),c.right=Et(p.right,c.right),c.bottom=Et(p.bottom,c.bottom),c.left=Ye(p.left,c.left),c},Qi(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ua(t){const{width:e,height:n}=Xo(t);return{width:e,height:n}}function ja(t,e,n){const i=be(e),o=Ee(e),r=n==="fixed",s=tt(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=ve(0);function c(){l.x=Ei(o)}if(i||!i&&!r)if((Ot(e)!=="body"||Kt(o))&&(a=Ln(e)),i){const m=tt(e,!0,r,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else o&&c();r&&!i&&o&&c();const d=o&&!i&&!r?Jo(o,a):ve(0),p=s.left+a.scrollLeft-l.x-d.x,f=s.top+a.scrollTop-l.y-d.y;return{x:p,y:f,width:s.width,height:s.height}}function Hn(t){return fe(t).position==="static"}function eo(t,e){if(!be(t)||fe(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ee(t)===n&&(n=n.ownerDocument.body),n}function Qo(t,e){const n=te(t);if(On(t))return n;if(!be(t)){let o=Ne(t);for(;o&&!Ct(o);){if(de(o)&&!Hn(o))return o;o=Ne(o)}return n}let i=eo(t,e);for(;i&&Ma(i)&&Hn(i);)i=eo(i,e);return i&&Ct(i)&&Hn(i)&&!yi(i)?n:i||Da(t)||n}const qa=async function(e){const n=this.getOffsetParent||Qo,i=this.getDimensions,o=await i(e.floating);return{reference:ja(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Wa(t){return fe(t).direction==="rtl"}const Ga={convertOffsetParentRelativeRectToViewportRelativeRect:Ra,getDocumentElement:Ee,getClippingRect:$a,getOffsetParent:Qo,getElementRects:qa,getClientRects:Ba,getDimensions:Ua,getScale:pt,isElement:de,isRTL:Wa};function er(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function za(t,e){let n=null,i;const o=Ee(t);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=t.getBoundingClientRect(),{left:d,top:p,width:f,height:m}=c;if(a||e(),!f||!m)return;const y=pn(p),b=pn(o.clientWidth-(d+f)),E=pn(o.clientHeight-(p+m)),C=pn(d),S={rootMargin:-y+"px "+-b+"px "+-E+"px "+-C+"px",threshold:Ye(0,Et(1,l))||1};let u=!0;function x(h){const w=h[0].intersectionRatio;if(w!==l){if(!u)return s();w?s(!1,w):i=setTimeout(()=>{s(!1,1e-7)},1e3)}w===1&&!er(c,t.getBoundingClientRect())&&s(),u=!1}try{n=new IntersectionObserver(x,Q({},S,{root:o.ownerDocument}))}catch{n=new IntersectionObserver(x,S)}n.observe(t)}return s(!0),r}function Ya(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=wi(t),d=o||r?[...c?qt(c):[],...qt(e)]:[];d.forEach(C=>{o&&C.addEventListener("scroll",n,{passive:!0}),r&&C.addEventListener("resize",n)});const p=c&&a?za(c,n):null;let f=-1,m=null;s&&(m=new ResizeObserver(C=>{let[_]=C;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,b=l?tt(t):null;l&&E();function E(){const C=tt(t);b&&!er(b,C)&&n(),b=C,y=requestAnimationFrame(E)}return n(),()=>{var C;d.forEach(_=>{o&&_.removeEventListener("scroll",n),r&&_.removeEventListener("resize",n)}),p?.(),(C=m)==null||C.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Xa=Aa,Ka=La,Ja=Oa,Za=Sa,Qa=Ia,el=(t,e,n)=>{const i=new Map,o=Q({platform:Ga},n),r=Q({},o.platform,{_c:i});return xa(t,e,Q({},o,{platform:r}))};function tl(t){t.cleanup&&t.cleanup();const e=t._getResolvedAttachToOptions();let n=e.element;const i=al(e,t),o=jo(e);return o&&(n=document.body,t.shepherdElementComponent.getElement().classList.add("shepherd-centered")),t.cleanup=Ya(n,t.el,()=>{if(!t.el){t.cleanup==null||t.cleanup();return}ol(n,t,i,o)}),t.target=e.element,i}function nl(t,e){return{floatingUIOptions:fi(t.floatingUIOptions||{},e.floatingUIOptions||{})}}function il(t){t.cleanup&&t.cleanup(),t.cleanup=null}function ol(t,e,n,i){return el(t,e.el,n).then(rl(e,i)).then(o=>new Promise(r=>{setTimeout(()=>r(o),300)})).then(o=>{o!=null&&o.el&&(o.el.tabIndex=0,o.el.focus({preventScroll:!0}))})}function rl(t,e){return({x:n,y:i,placement:o,middlewareData:r})=>(t.el&&(e?Object.assign(t.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(t.el.style,{position:"absolute",left:`${n}px`,top:`${i}px`}),t.el.dataset.popperPlacement=o,sl(t.el,r)),t)}function sl(t,e){const n=t.querySelector(".shepherd-arrow");if(wt(n)&&e.arrow){const{x:i,y:o}=e.arrow;Object.assign(n.style,{left:i!=null?`${i}px`:"",top:o!=null?`${o}px`:""})}}function al(t,e){var n,i,o;const r={strategy:"absolute"};r.middleware=[];const s=ll(e),a=jo(t),l=(n=t.on)==null?void 0:n.includes("auto"),c=(t==null||(i=t.on)==null?void 0:i.includes("-start"))||(t==null||(o=t.on)==null?void 0:o.includes("-end"));if(!a){if(l){var d;r.middleware.push(Xa({crossAxis:!0,alignment:c?t==null||(d=t.on)==null?void 0:d.split("-").pop():null}))}else r.middleware.push(Ja());if(r.middleware.push(Ka({limiter:Qa(),crossAxis:!0})),s){const p=typeof e.options.arrow=="object"?e.options.arrow:{padding:4};r.middleware.push(Za({element:s,padding:c?p.padding:0}))}l||(r.placement=t.on)}return fi(r,e.options.floatingUIOptions||{})}function ll(t){return t.options.arrow&&t.el?t.el.querySelector(".shepherd-arrow"):!1}function ie(){}function cl(t,e){for(const n in e)t[n]=e[n];return t}function tr(t){return t()}function to(){return Object.create(null)}function Jt(t){t.forEach(tr)}function Ci(t){return typeof t=="function"}function Me(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ul(t){return Object.keys(t).length===0}function _t(t,e){t.appendChild(e)}function pe(t,e,n){t.insertBefore(e,n||null)}function le(t){t.parentNode&&t.parentNode.removeChild(t)}function dl(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function we(t){return document.createElement(t)}function no(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function nr(t){return document.createTextNode(t)}function xn(){return nr(" ")}function fl(){return nr("")}function In(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const pl=["width","height"];function io(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&pl.indexOf(i)===-1?t[i]=e[i]:$(t,i,e[i])}function hl(t){return Array.from(t.childNodes)}function lt(t,e,n){t.classList.toggle(e,!!n)}let Wt;function Ft(t){Wt=t}function _i(){if(!Wt)throw new Error("Function called outside component initialization");return Wt}function ml(t){_i().$$.on_mount.push(t)}function xi(t){_i().$$.after_update.push(t)}function gl(t){_i().$$.on_destroy.push(t)}const dt=[],xt=[];let ht=[];const oo=[],vl=Promise.resolve();let Jn=!1;function yl(){Jn||(Jn=!0,vl.then(ir))}function Zn(t){ht.push(t)}const Fn=new Set;let ct=0;function ir(){if(ct!==0)return;const t=Wt;do{try{for(;ct<dt.length;){const e=dt[ct];ct++,Ft(e),bl(e.$$)}}catch(e){throw dt.length=0,ct=0,e}for(Ft(null),dt.length=0,ct=0;xt.length;)xt.pop()();for(let e=0;e<ht.length;e+=1){const n=ht[e];Fn.has(n)||(Fn.add(n),n())}ht.length=0}while(dt.length);for(;oo.length;)oo.pop()();Jn=!1,Fn.clear(),Ft(t)}function bl(t){if(t.fragment!==null){t.update(),Jt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Zn)}}function wl(t){const e=[],n=[];ht.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ht=e}const gn=new Set;let We;function Ke(){We={r:0,c:[],p:We}}function Je(){We.r||Jt(We.c),We=We.p}function F(t,e){t&&t.i&&(gn.delete(t),t.i(e))}function q(t,e,n,i){if(t&&t.o){if(gn.has(t))return;gn.add(t),We.c.push(()=>{gn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ro(t){return t?.length!==void 0?t:Array.from(t)}function El(t,e){const n={},i={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const l in s)l in a||(i[l]=1);for(const l in a)o[l]||(n[l]=a[l],o[l]=1);t[r]=a}else for(const l in s)o[l]=1}for(const s in i)s in n||(n[s]=void 0);return n}function nt(t){t&&t.c()}function Ve(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Zn(()=>{const r=t.$$.on_mount.map(tr).filter(Ci);t.$$.on_destroy?t.$$.on_destroy.push(...r):Jt(r),t.$$.on_mount=[]}),o.forEach(Zn)}function $e(t,e){const n=t.$$;n.fragment!==null&&(wl(n.after_update),Jt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Cl(t,e){t.$$.dirty[0]===-1&&(dt.push(t),yl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,i,o,r,s=null,a=[-1]){const l=Wt;Ft(t);const c=t.$$={fragment:null,ctx:[],props:r,update:ie,not_equal:o,bound:to(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:to(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(p,f,...m)=>{const y=m.length?m[0]:f;return c.ctx&&o(c.ctx[p],c.ctx[p]=y)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](y),d&&Cl(t,p)),f}):[],c.update(),d=!0,Jt(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const p=hl(e.target);c.fragment&&c.fragment.l(p),p.forEach(le)}else c.fragment&&c.fragment.c();e.intro&&F(t.$$.fragment),Ve(t,e.target,e.anchor),ir()}Ft(l)}class Pe{constructor(){this.$$=void 0,this.$$set=void 0}$destroy(){$e(this,1),this.$destroy=ie}$on(e,n){if(!Ci(n))return ie;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!ul(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _l="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_l);function xl(t){let e,n,i,o,r;return{c(){e=we("button"),$(e,"aria-label",n=t[3]?t[3]:null),$(e,"class",i=`${t[1]||""} shepherd-button ${t[4]?"shepherd-button-secondary":""}`),e.disabled=t[2],$(e,"tabindex","0"),$(e,"type","button")},m(s,a){pe(s,e,a),e.innerHTML=t[5],o||(r=In(e,"click",function(){Ci(t[0])&&t[0].apply(this,arguments)}),o=!0)},p(s,[a]){t=s,a&32&&(e.innerHTML=t[5]),a&8&&n!==(n=t[3]?t[3]:null)&&$(e,"aria-label",n),a&18&&i!==(i=`${t[1]||""} shepherd-button ${t[4]?"shepherd-button-secondary":""}`)&&$(e,"class",i),a&4&&(e.disabled=t[2])},i:ie,o:ie,d(s){s&&le(e),o=!1,r()}}}function Sl(t,e,n){let{config:i,step:o}=e,r,s,a,l,c,d;function p(f){return Be(f)?f=f.call(o):f}return t.$$set=f=>{"config"in f&&n(6,i=f.config),"step"in f&&n(7,o=f.step)},t.$$.update=()=>{t.$$.dirty&192&&(n(0,r=i.action?i.action.bind(o.tour):null),n(1,s=i.classes),n(2,a=i.disabled?p(i.disabled):!1),n(3,l=i.label?p(i.label):null),n(4,c=i.secondary),n(5,d=i.text?p(i.text):null))},[r,s,a,l,c,d,i,o]}class Tl extends Pe{constructor(e){super(),De(this,e,Sl,xl,Me,{config:6,step:7})}}function so(t,e,n){const i=t.slice();return i[2]=e[n],i}function ao(t){let e,n,i=ro(t[1]),o=[];for(let s=0;s<i.length;s+=1)o[s]=lo(so(t,i,s));const r=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=fl()},m(s,a){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,a);pe(s,e,a),n=!0},p(s,a){if(a&3){i=ro(s[1]);let l;for(l=0;l<i.length;l+=1){const c=so(s,i,l);o[l]?(o[l].p(c,a),F(o[l],1)):(o[l]=lo(c),o[l].c(),F(o[l],1),o[l].m(e.parentNode,e))}for(Ke(),l=i.length;l<o.length;l+=1)r(l);Je()}},i(s){if(!n){for(let a=0;a<i.length;a+=1)F(o[a]);n=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)q(o[a]);n=!1},d(s){s&&le(e),dl(o,s)}}}function lo(t){let e,n;return e=new Tl({props:{config:t[2],step:t[0]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.config=i[2]),o&1&&(r.step=i[0]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function Al(t){let e,n,i=t[1]&&ao(t);return{c(){e=we("footer"),i&&i.c(),$(e,"class","shepherd-footer")},m(o,r){pe(o,e,r),i&&i.m(e,null),n=!0},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&F(i,1)):(i=ao(o),i.c(),F(i,1),i.m(e,null)):i&&(Ke(),q(i,1,1,()=>{i=null}),Je())},i(o){n||(F(i),n=!0)},o(o){q(i),n=!1},d(o){o&&le(e),i&&i.d()}}}function Ol(t,e,n){let i,{step:o}=e;return t.$$set=r=>{"step"in r&&n(0,o=r.step)},t.$$.update=()=>{t.$$.dirty&1&&n(1,i=o.options.buttons)},[o,i]}class Ll extends Pe{constructor(e){super(),De(this,e,Ol,Al,Me,{step:0})}}function Il(t){let e,n,i,o,r;return{c(){e=we("button"),n=we("span"),n.textContent="",$(n,"aria-hidden","true"),$(e,"aria-label",i=t[0].label?t[0].label:"Close Tour"),$(e,"class","shepherd-cancel-icon"),$(e,"type","button")},m(s,a){pe(s,e,a),_t(e,n),o||(r=In(e,"click",t[1]),o=!0)},p(s,[a]){a&1&&i!==(i=s[0].label?s[0].label:"Close Tour")&&$(e,"aria-label",i)},i:ie,o:ie,d(s){s&&le(e),o=!1,r()}}}function Ml(t,e,n){let{cancelIcon:i,step:o}=e;const r=s=>{s.preventDefault(),o.cancel()};return t.$$set=s=>{"cancelIcon"in s&&n(0,i=s.cancelIcon),"step"in s&&n(2,o=s.step)},[i,r,o]}class Dl extends Pe{constructor(e){super(),De(this,e,Ml,Il,Me,{cancelIcon:0,step:2})}}function Pl(t){let e;return{c(){e=we("h3"),$(e,"id",t[1]),$(e,"class","shepherd-title")},m(n,i){pe(n,e,i),t[3](e)},p(n,[i]){i&2&&$(e,"id",n[1])},i:ie,o:ie,d(n){n&&le(e),t[3](null)}}}function kl(t,e,n){let{labelId:i,element:o,title:r}=e;xi(()=>{Be(r)&&n(2,r=r()),n(0,o.innerHTML=r,o)});function s(a){xt[a?"unshift":"push"](()=>{o=a,n(0,o)})}return t.$$set=a=>{"labelId"in a&&n(1,i=a.labelId),"element"in a&&n(0,o=a.element),"title"in a&&n(2,r=a.title)},[o,i,r,s]}class Rl extends Pe{constructor(e){super(),De(this,e,kl,Pl,Me,{labelId:1,element:0,title:2})}}function co(t){let e,n;return e=new Rl({props:{labelId:t[0],title:t[2]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&1&&(r.labelId=i[0]),o&4&&(r.title=i[2]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function uo(t){let e,n;return e=new Dl({props:{cancelIcon:t[3],step:t[1]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.cancelIcon=i[3]),o&2&&(r.step=i[1]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function Bl(t){let e,n,i,o=t[2]&&co(t),r=t[3]&&t[3].enabled&&uo(t);return{c(){e=we("header"),o&&o.c(),n=xn(),r&&r.c(),$(e,"class","shepherd-header")},m(s,a){pe(s,e,a),o&&o.m(e,null),_t(e,n),r&&r.m(e,null),i=!0},p(s,[a]){s[2]?o?(o.p(s,a),a&4&&F(o,1)):(o=co(s),o.c(),F(o,1),o.m(e,n)):o&&(Ke(),q(o,1,1,()=>{o=null}),Je()),s[3]&&s[3].enabled?r?(r.p(s,a),a&8&&F(r,1)):(r=uo(s),r.c(),F(r,1),r.m(e,null)):r&&(Ke(),q(r,1,1,()=>{r=null}),Je())},i(s){i||(F(o),F(r),i=!0)},o(s){q(o),q(r),i=!1},d(s){s&&le(e),o&&o.d(),r&&r.d()}}}function Nl(t,e,n){let{labelId:i,step:o}=e,r,s;return t.$$set=a=>{"labelId"in a&&n(0,i=a.labelId),"step"in a&&n(1,o=a.step)},t.$$.update=()=>{t.$$.dirty&2&&(n(2,r=o.options.title),n(3,s=o.options.cancelIcon))},[i,o,r,s]}class Hl extends Pe{constructor(e){super(),De(this,e,Nl,Bl,Me,{labelId:0,step:1})}}function Fl(t){let e;return{c(){e=we("div"),$(e,"class","shepherd-text"),$(e,"id",t[1])},m(n,i){pe(n,e,i),t[3](e)},p(n,[i]){i&2&&$(e,"id",n[1])},i:ie,o:ie,d(n){n&&le(e),t[3](null)}}}function Vl(t,e,n){let{descriptionId:i,element:o,step:r}=e;xi(()=>{let{text:a}=r.options;Be(a)&&(a=a.call(r)),wt(a)?o.appendChild(a):n(0,o.innerHTML=a,o)});function s(a){xt[a?"unshift":"push"](()=>{o=a,n(0,o)})}return t.$$set=a=>{"descriptionId"in a&&n(1,i=a.descriptionId),"element"in a&&n(0,o=a.element),"step"in a&&n(2,r=a.step)},[o,i,r,s]}class $l extends Pe{constructor(e){super(),De(this,e,Vl,Fl,Me,{descriptionId:1,element:0,step:2})}}function fo(t){let e,n;return e=new Hl({props:{labelId:t[1],step:t[2]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&2&&(r.labelId=i[1]),o&4&&(r.step=i[2]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function po(t){let e,n;return e=new $l({props:{descriptionId:t[0],step:t[2]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&1&&(r.descriptionId=i[0]),o&4&&(r.step=i[2]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function ho(t){let e,n;return e=new Ll({props:{step:t[2]}}),{c(){nt(e.$$.fragment)},m(i,o){Ve(e,i,o),n=!0},p(i,o){const r={};o&4&&(r.step=i[2]),e.$set(r)},i(i){n||(F(e.$$.fragment,i),n=!0)},o(i){q(e.$$.fragment,i),n=!1},d(i){$e(e,i)}}}function Ul(t){let e,n=!X(t[2].options.title)||t[2].options.cancelIcon&&t[2].options.cancelIcon.enabled,i,o=!X(t[2].options.text),r,s=Array.isArray(t[2].options.buttons)&&t[2].options.buttons.length,a,l=n&&fo(t),c=o&&po(t),d=s&&ho(t);return{c(){e=we("div"),l&&l.c(),i=xn(),c&&c.c(),r=xn(),d&&d.c(),$(e,"class","shepherd-content")},m(p,f){pe(p,e,f),l&&l.m(e,null),_t(e,i),c&&c.m(e,null),_t(e,r),d&&d.m(e,null),a=!0},p(p,[f]){f&4&&(n=!X(p[2].options.title)||p[2].options.cancelIcon&&p[2].options.cancelIcon.enabled),n?l?(l.p(p,f),f&4&&F(l,1)):(l=fo(p),l.c(),F(l,1),l.m(e,i)):l&&(Ke(),q(l,1,1,()=>{l=null}),Je()),f&4&&(o=!X(p[2].options.text)),o?c?(c.p(p,f),f&4&&F(c,1)):(c=po(p),c.c(),F(c,1),c.m(e,r)):c&&(Ke(),q(c,1,1,()=>{c=null}),Je()),f&4&&(s=Array.isArray(p[2].options.buttons)&&p[2].options.buttons.length),s?d?(d.p(p,f),f&4&&F(d,1)):(d=ho(p),d.c(),F(d,1),d.m(e,null)):d&&(Ke(),q(d,1,1,()=>{d=null}),Je())},i(p){a||(F(l),F(c),F(d),a=!0)},o(p){q(l),q(c),q(d),a=!1},d(p){p&&le(e),l&&l.d(),c&&c.d(),d&&d.d()}}}function jl(t,e,n){let{descriptionId:i,labelId:o,step:r}=e;return t.$$set=s=>{"descriptionId"in s&&n(0,i=s.descriptionId),"labelId"in s&&n(1,o=s.labelId),"step"in s&&n(2,r=s.step)},[i,o,r]}class ql extends Pe{constructor(e){super(),De(this,e,jl,Ul,Me,{descriptionId:0,labelId:1,step:2})}}function mo(t){let e;return{c(){e=we("div"),$(e,"class","shepherd-arrow"),$(e,"data-popper-arrow","")},m(n,i){pe(n,e,i)},d(n){n&&le(e)}}}function Wl(t){let e,n,i,o,r,s,a,l,c=t[4].options.arrow&&t[4].options.attachTo&&t[4].options.attachTo.element&&t[4].options.attachTo.on&&mo();i=new ql({props:{descriptionId:t[2],labelId:t[3],step:t[4]}});let d=[{"aria-describedby":o=X(t[4].options.text)?null:t[2]},{"aria-labelledby":r=t[4].options.title?t[3]:null},t[1],{open:"true"}],p={};for(let f=0;f<d.length;f+=1)p=cl(p,d[f]);return{c(){e=we("dialog"),c&&c.c(),n=xn(),nt(i.$$.fragment),io(e,p),lt(e,"shepherd-has-cancel-icon",t[5]),lt(e,"shepherd-has-title",t[6]),lt(e,"shepherd-element",!0)},m(f,m){pe(f,e,m),c&&c.m(e,null),_t(e,n),Ve(i,e,null),t[18](e),s=!0,a||(l=In(e,"keydown",t[7]),a=!0)},p(f,[m]){f[4].options.arrow&&f[4].options.attachTo&&f[4].options.attachTo.element&&f[4].options.attachTo.on?c||(c=mo(),c.c(),c.m(e,n)):c&&(c.d(1),c=null);const y={};m&4&&(y.descriptionId=f[2]),m&8&&(y.labelId=f[3]),m&16&&(y.step=f[4]),i.$set(y),io(e,p=El(d,[(!s||m&20&&o!==(o=X(f[4].options.text)?null:f[2]))&&{"aria-describedby":o},(!s||m&24&&r!==(r=f[4].options.title?f[3]:null))&&{"aria-labelledby":r},m&2&&f[1],{open:"true"}])),lt(e,"shepherd-has-cancel-icon",f[5]),lt(e,"shepherd-has-title",f[6]),lt(e,"shepherd-element",!0)},i(f){s||(F(i.$$.fragment,f),s=!0)},o(f){q(i.$$.fragment,f),s=!1},d(f){f&&le(e),c&&c.d(),$e(i),t[18](null),a=!1,l()}}}const Gl=9,zl=27,Yl=37,Xl=39;function go(t){return t.split(" ").filter(e=>!!e.length)}function Kl(t,e,n){let{attachToElement:i,attachTofocusableDialogElements:o,classPrefix:r,element:s,descriptionId:a,focusableAttachToElements:l,firstFocusableAttachToElement:c,lastFocusableAttachToElement:d,firstFocusableDialogElement:p,focusableDialogElements:f,lastFocusableDialogElement:m,labelId:y,step:b,dataStepId:E}=e,C,_,S;const u=()=>s;ml(()=>{n(1,E={[`data-${r}shepherd-step-id`]:b.id}),n(13,f=[...s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(12,p=f[0]),n(14,m=f[f.length-1]);const v=b._getResolvedAttachToOptions();v!=null&&v.element&&(n(8,i=v.element),n(8,i.tabIndex=0,i),n(9,l=[i,...i.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(10,c=l[0]),n(11,d=l[l.length-1]),i.addEventListener("keydown",A))}),gl(()=>{var v;(v=i)==null||v.removeEventListener("keydown",A)}),xi(()=>{S!==b.options.classes&&x()});function x(){h(S),S=b.options.classes,w(S)}function h(v){if(jt(v)){const T=go(v);T.length&&s.classList.remove(...T)}}function w(v){if(jt(v)){const T=go(v);T.length&&s.classList.add(...T)}}const A=v=>{const{tour:T}=b;switch(v.keyCode){case Gl:if((!l||l.length===0)&&f.length===0){v.preventDefault();break}if(v.shiftKey)if(document.activeElement===p||document.activeElement.classList.contains("shepherd-element")){var O;v.preventDefault(),((O=d)!=null?O:m).focus()}else document.activeElement===c&&(v.preventDefault(),m.focus());else if(document.activeElement===m){var M;v.preventDefault(),((M=c)!=null?M:p).focus()}else document.activeElement===d&&(v.preventDefault(),p.focus());break;case zl:T.options.exitOnEsc&&(v.preventDefault(),v.stopPropagation(),b.cancel());break;case Yl:T.options.keyboardNavigation&&(v.preventDefault(),v.stopPropagation(),T.back());break;case Xl:T.options.keyboardNavigation&&(v.preventDefault(),v.stopPropagation(),T.next());break}};function L(v){xt[v?"unshift":"push"](()=>{s=v,n(0,s)})}return t.$$set=v=>{"attachToElement"in v&&n(8,i=v.attachToElement),"attachTofocusableDialogElements"in v&&n(15,o=v.attachTofocusableDialogElements),"classPrefix"in v&&n(16,r=v.classPrefix),"element"in v&&n(0,s=v.element),"descriptionId"in v&&n(2,a=v.descriptionId),"focusableAttachToElements"in v&&n(9,l=v.focusableAttachToElements),"firstFocusableAttachToElement"in v&&n(10,c=v.firstFocusableAttachToElement),"lastFocusableAttachToElement"in v&&n(11,d=v.lastFocusableAttachToElement),"firstFocusableDialogElement"in v&&n(12,p=v.firstFocusableDialogElement),"focusableDialogElements"in v&&n(13,f=v.focusableDialogElements),"lastFocusableDialogElement"in v&&n(14,m=v.lastFocusableDialogElement),"labelId"in v&&n(3,y=v.labelId),"step"in v&&n(4,b=v.step),"dataStepId"in v&&n(1,E=v.dataStepId)},t.$$.update=()=>{t.$$.dirty&16&&(n(5,C=b.options&&b.options.cancelIcon&&b.options.cancelIcon.enabled),n(6,_=b.options&&b.options.title))},[s,E,a,y,b,C,_,A,i,l,c,d,p,f,m,o,r,u,L]}class Jl extends Pe{constructor(e){super(),De(this,e,Kl,Wl,Me,{attachToElement:8,attachTofocusableDialogElements:15,classPrefix:16,element:0,descriptionId:2,focusableAttachToElements:9,firstFocusableAttachToElement:10,lastFocusableAttachToElement:11,firstFocusableDialogElement:12,focusableDialogElements:13,lastFocusableDialogElement:14,labelId:3,step:4,dataStepId:1,getElement:17})}get getElement(){return this.$$.ctx[17]}}class Qn extends ui{constructor(e,n={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=e,this.classPrefix=this.tour.options?Uo(this.tour.options.classPrefix):"",this.styles=e.styles,this._resolvedAttachTo=null,pi(this),this._setOptions(n),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){il(this),wt(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var e;(e=this.tour.modal)==null||e.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=pa(this),this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=fa(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return Be(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(e){Object.assign(this.options,e),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){const e=`${this.id}-description`,n=`${this.id}-label`;return this.shepherdElementComponent=new Jl({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:e,labelId:n,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(e){const{element:n}=this._getResolvedAttachToOptions();Be(this.options.scrollToHandler)?this.options.scrollToHandler(n):Ws(n)&&typeof n.scrollIntoView=="function"&&n.scrollIntoView(e)}_getClassOptions(e){const n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,i=e.classes?e.classes:"",o=n&&n.classes?n.classes:"",r=[...i.split(" "),...o.split(" ")],s=new Set(r);return Array.from(s).join(" ").trim()}_setOptions(e={}){let n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;n=fi({},n||{}),this.options=Object.assign({arrow:!0},n,e,nl(n,e));const{when:i}=this.options;this.options.classes=this._getClassOptions(e),this.destroy(),this.id=this.options.id||`step-${qo()}`,i&&Object.keys(i).forEach(o=>{this.on(o,i[o],this)})}_setupElements(){X(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&ca(this),tl(this)}_show(){var e;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),(e=this.tour.modal)==null||e.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);const n=this.shepherdElementComponent.getElement(),i=this.target||document.body,o=this._resolvedExtraHighlightElements;i.classList.add(`${this.classPrefix}shepherd-enabled`),i.classList.add(`${this.classPrefix}shepherd-target`),n.classList.add("shepherd-enabled"),o?.forEach(r=>{r.classList.add(`${this.classPrefix}shepherd-enabled`),r.classList.add(`${this.classPrefix}shepherd-target`)}),this.trigger("show")}_styleTargetElementForStep(e){const n=e.target,i=e._resolvedExtraHighlightElements;if(!n)return;const o=e.options.highlightClass;o&&(n.classList.add(o),i?.forEach(r=>r.classList.add(o))),n.classList.remove("shepherd-target-click-disabled"),i?.forEach(r=>r.classList.remove("shepherd-target-click-disabled")),e.options.canClickTarget===!1&&(n.classList.add("shepherd-target-click-disabled"),i?.forEach(r=>r.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){const e=this.target||document.body,n=this._resolvedExtraHighlightElements,i=this.options.highlightClass;i&&(e.classList.remove(i),n?.forEach(o=>o.classList.remove(i))),e.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),n?.forEach(o=>{o.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)})}}function Zl(t){if(t){const{steps:e}=t;e.forEach(n=>{n.options&&n.options.canClickTarget===!1&&n.options.attachTo&&(wt(n.target)&&n.target.classList.remove("shepherd-target-click-disabled"),n._resolvedExtraHighlightElements&&n._resolvedExtraHighlightElements.forEach(i=>{wt(i)&&i.classList.remove("shepherd-target-click-disabled")}))})}}function Ql(t){let e="";const{innerWidth:n,innerHeight:i}=window;return t.forEach(o=>{const{width:r,height:s,x:a=0,y:l=0,r:c=0}=o,{topLeft:d=0,topRight:p=0,bottomRight:f=0,bottomLeft:m=0}=typeof c=="number"?{topLeft:c,topRight:c,bottomRight:c,bottomLeft:c}:c;e+=`M${a+d},${l}      a${d},${d},0,0,0-${d},${d}      V${s+l-m}      a${m},${m},0,0,0,${m},${m}      H${r+a-f}      a${f},${f},0,0,0,${f}-${f}      V${l+p}      a${p},${p},0,0,0-${p}-${p}      Z`}),`M${n},${i}          H0          V0          H${n}          V${i}          Z          ${e}`.replace(/\s/g,"")}function ec(t){let e,n,i,o,r;return{c(){e=no("svg"),n=no("path"),$(n,"d",t[2]),$(e,"class",i=`${t[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(s,a){pe(s,e,a),_t(e,n),t[11](e),o||(r=In(e,"touchmove",t[3]),o=!0)},p(s,[a]){a&4&&$(n,"d",s[2]),a&2&&i!==(i=`${s[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&$(e,"class",i)},i:ie,o:ie,d(s){s&&le(e),t[11](null),o=!1,r()}}}function or(t){if(!t)return null;const n=t instanceof HTMLElement&&window.getComputedStyle(t).overflowY;return n!=="hidden"&&n!=="visible"&&t.scrollHeight>=t.clientHeight?t:or(t.parentElement)}function tc(t){let e={top:0,left:0};if(!t)return e;let n=t.ownerDocument.defaultView;for(;n!==window.top;){var i;const s=(i=n)==null?void 0:i.frameElement;if(s){var o,r;const a=s.getBoundingClientRect();e.top+=a.top+((o=a.scrollTop)!=null?o:0),e.left+=a.left+((r=a.scrollLeft)!=null?r:0)}n=n.parent}return e}function nc(t,e){const n=t.getBoundingClientRect();let i=n.y||n.top,o=n.bottom||i+n.height;if(e){const s=e.getBoundingClientRect(),a=s.y||s.top,l=s.bottom||a+s.height;i=Math.max(i,a),o=Math.min(o,l)}const r=Math.max(o-i,0);return{y:i,height:r}}function ic(t,e,n){let{element:i,openingProperties:o}=e,r=!1,s,a;c();const l=()=>i;function c(){n(4,o=[{width:0,height:0,x:0,y:0,r:0}])}function d(){n(1,r=!1),C()}function p(u=0,x=0,h=0,w=0,A,L,v){if(L){const T=[L,...v||[]];n(4,o=[]);for(const O of T){if(!O||T.indexOf(O)!==T.lastIndexOf(O))continue;const{y:M,height:k}=nc(O,A),{x:B,width:N,left:P}=O.getBoundingClientRect();T.some(W=>{if(W===O)return!1;const j=W.getBoundingClientRect();return B>=j.left&&B+N<=j.right&&M>=j.top&&M+k<=j.bottom})||o.push({width:N+u*2,height:k+u*2,x:(B||P)+h-u,y:M+w-u,r:x})}}else c()}function f(u){C(),u.tour.options.useModalOverlay?(_(u),m()):d()}function m(){n(1,r=!0)}const y=u=>{u.preventDefault()},b=u=>{u.stopPropagation()};function E(){window.addEventListener("touchmove",y,{passive:!1})}function C(){s&&(cancelAnimationFrame(s),s=void 0),window.removeEventListener("touchmove",y,{passive:!1})}function _(u){const{modalOverlayOpeningPadding:x,modalOverlayOpeningRadius:h,modalOverlayOpeningXOffset:w=0,modalOverlayOpeningYOffset:A=0}=u.options,L=tc(u.target),v=or(u.target),T=()=>{s=void 0,p(x,h,w+L.left,A+L.top,v,u.target,u._resolvedExtraHighlightElements),s=requestAnimationFrame(T)};T(),E()}function S(u){xt[u?"unshift":"push"](()=>{i=u,n(0,i)})}return t.$$set=u=>{"element"in u&&n(0,i=u.element),"openingProperties"in u&&n(4,o=u.openingProperties)},t.$$.update=()=>{t.$$.dirty&16&&n(2,a=Ql(o))},[i,r,a,b,o,l,c,d,p,f,m,S]}class oc extends Pe{constructor(e){super(),De(this,e,ic,ec,Me,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}class rc extends ui{constructor(){super(),this.activeTour=void 0,pi(this)}}class sc extends ui{constructor(e={}){super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,pi(this);const n={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},n,e),this.classPrefix=Uo(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(o=>{(r=>{this.on(r,s=>{s=s||{},s.tour=this,Ge.trigger(r,s)})})(o)}),this._setTourID(e.id),this}addStep(e,n){let i=e;return i instanceof Qn?i.tour=this:i=new Qn(this,i),X(n)?this.steps.push(i):this.steps.splice(n,0,i),i}addSteps(e){return Array.isArray(e)&&e.forEach(n=>{this.addStep(n)}),this}back(){const e=this.steps.indexOf(this.currentStep);this.show(e-1,!1)}async cancel(){if(this.options.confirmCancel){const e=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";let n;Be(this.options.confirmCancel)?n=await this.options.confirmCancel():n=window.confirm(e),n&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(e){return this.steps.find(n=>n.id===e)}getCurrentStep(){return this.currentStep}hide(){const e=this.getCurrentStep();if(e)return e.hide()}isActive(){return Ge.activeTour===this}next(){const e=this.steps.indexOf(this.currentStep);e===this.steps.length-1?this.complete():this.show(e+1,!0)}removeStep(e){const n=this.getCurrentStep();this.steps.some((i,o)=>{if(i.id===e)return i.isOpen()&&i.hide(),i.destroy(),this.steps.splice(o,1),!0}),n&&n.id===e&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(e=0,n=!0){const i=jt(e)?this.getById(e):this.steps[e];i&&(this._updateStateBeforeShow(),Be(i.options.showOn)&&!i.options.showOn()?this._skipStep(i,n):(this.currentStep=i,this.trigger("show",{step:i,previous:this.currentStep}),i.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(e){const n=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(i=>i.destroy()),Zl(this),this.trigger(e,{index:n}),Ge.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(e==="cancel"||e==="complete")&&this.modal){const i=document.querySelector(".shepherd-modal-overlay-container");i&&(i.remove(),this.modal=null)}wt(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),Ge.activeTour=this}setupModal(){this.modal=new oc({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(e,n){const i=this.steps.indexOf(e);if(i===this.steps.length-1)this.complete();else{const o=n?i+1:i-1;this.show(o,n)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(e){const n=this.options.tourName||"tour",i=e||qo();this.id=`${n}--${i}`}}const Ge=new rc,rr=typeof window>"u";Ge.Step=rr?ua:Qn;Ge.Tour=rr?da:sc;class ac{constructor(){this.tour=null}init(){this.tour=new Ge.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-custom",scrollTo:!1,cancelIcon:{enabled:!0}}}),this.tour.addSteps([{id:"welcome",title:"Welcome to Navimus",text:"This is your interactive 3D platform to explore museum data.",buttons:[{text:"Skip",action:this.tour.cancel,classes:"shepherd-button-secondary"},{text:"Start Tour",action:this.tour.next,classes:"shepherd-button"}]},{id:"sidebar-modes",title:"Switch Modes",text:"Use this sidebar to toggle between <b>Free</b>, <b>Guided</b>, and <b>Semi-Guided</b> exploration modes.",attachTo:{element:"#sidebar-toggle-btn",on:"right"},buttons:[{text:"Back",action:this.tour.back,classes:"shepherd-button-secondary"},{text:"Next",action:this.tour.next,classes:"shepherd-button"}]},{id:"mode-indicator",title:"Current Status",text:"Ideally located here, you can always see which mode is currently active.",attachTo:{element:"#mode-indicator",on:"bottom"},buttons:[{text:"Back",action:this.tour.back,classes:"shepherd-button-secondary"},{text:"Next",action:this.tour.next,classes:"shepherd-button"}]},{id:"legend-area",title:"Legend & User",text:'Check map symbols here, or toggle the "Agent" visibility by changing your user role.',attachTo:{element:"#mock-login-btn",on:"left"},buttons:[{text:"Back",action:this.tour.back,classes:"shepherd-button-secondary"},{text:"Next",action:this.tour.next,classes:"shepherd-button"}]},{id:"spatial-filter",title:"Spatial Navigation",text:"When in Guided Mode, dropdown menus will appear here to help you filter by Continent, Country, or City.",attachTo:{element:"#spatial-builder-container",on:"right"},buttons:[{text:"Done",action:this.tour.complete,classes:"shepherd-button"}]}])}start(){this.tour||this.init(),this.tour.start()}}class lc{constructor(){this.viewer=null,this.layerOSM=null,this.layerSat=null,this.googleTileset=null,this.isGoogleMode=!1,this.BLEND_HEIGHT_START=2e5,this.BLEND_HEIGHT_END=1e5}async init(e){this.viewer=e;try{const n=await Cesium.ArcGisMapServerImageryProvider.fromUrl("https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"),i=await Cesium.ArcGisMapServerImageryProvider.fromUrl("https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer");this.layerSat=e.imageryLayers.addImageryProvider(i),this.layerOSM=e.imageryLayers.addImageryProvider(n),this.layerSat.alpha=0,this.layerOSM.alpha=1,this.viewer.scene.preRender.addEventListener(()=>{this.isGoogleMode||this.updateBlending()}),console.log(" LayerManager: Layers loaded successfully.")}catch(n){console.error(" LayerManager Init Failed:",n)}}updateBlending(){if(!this.layerOSM||!this.layerSat)return;let n=(this.viewer.camera.positionCartographic.height-this.BLEND_HEIGHT_END)/(this.BLEND_HEIGHT_START-this.BLEND_HEIGHT_END);n>1&&(n=1),n<0&&(n=0),this.layerOSM.alpha=n,this.layerSat.alpha=1-n}async toggleGoogleMode(e){if(this.isGoogleMode=e,e){if(console.log(" Switching to Google..."),this.layerOSM&&(this.layerOSM.show=!1),this.layerSat&&(this.layerSat.show=!1),this.viewer.scene.globe.show=!1,!this.googleTileset)try{Cesium.GoogleMaps.defaultApiKey="YOUR_GOOGLE_API_KEY",this.googleTileset=await Cesium.Cesium3DTileset.fromUrl("https://tile.googleapis.com/v1/3dtiles/root.json"),this.viewer.scene.primitives.add(this.googleTileset)}catch(n){console.error("Google Load Failed",n);return}this.googleTileset.show=!0}else console.log(" Back to Open Source..."),this.googleTileset&&(this.googleTileset.show=!1),this.viewer.scene.globe.show=!0,this.layerOSM&&(this.layerOSM.show=!0),this.layerSat&&(this.layerSat.show=!0),this.updateBlending()}}class cc{constructor(){this.currentLang="en",this.dictionary={en:{mode_guided:"Fully Guided Exploration",mode_semi:"Semi Guided Exploration",mode_free:"Free Exploration",header_spatial:"1. Spatial Filters",btn_add_location:"+ Add Location",header_semantic:"2. Semantic Filters",btn_query:"Query",btn_add_condition:"+",label_destination:"Destination:",placeholder_semi:"e.g. Science Museum",btn_navigate:"Navigate",btn_thinking:"Thinking...",header_results:"Query Results",no_results:"No results found",legend_title:"Legend",legend_selected:"Selected",legend_museum:"Museum",legend_city:"City Area",google_mode:"Google 3D Mode",btn_deactivate_ai:"Deactivate AI",btn_activate_ai:"Activate AI",agent_name:"Navi-AI",agent_welcome:"Hello! I am the collective consciousness of this museum space. How can I guide your research today?",placeholder_agent:"Type your learning goal...",agent_reset_result:"",mode_label:"Current Mode: ",legend_level_continent:"Continent Level",legend_level_country:"Country Level",legend_level_city:"City Level",legend_type_title:"Museum Types",cat_arts:"Arts & Culture",cat_history:"History & Society",cat_science:"Science & Tech",cat_nature:"Nature & Env",cat_general:"General & Service",cat_unknown:"Other / Unknown"},zh:{mode_guided:"",mode_semi:"AI ",mode_free:"",header_spatial:"1. ",btn_add_location:"+ ",header_semantic:"2. ",btn_query:"",btn_add_condition:"+",label_destination:":",placeholder_semi:"",btn_navigate:"",btn_thinking:"...",header_results:"",no_results:"",legend_title:"",legend_selected:"",legend_museum:"",legend_city:"",google_mode:"3D",btn_deactivate_ai:"AI",btn_activate_ai:"AI",agent_name:"Navi-AI ",agent_welcome:"",placeholder_agent:"...",agent_reset_result:"",mode_label:": ",legend_level_continent:"",legend_level_country:"",legend_level_city:"",legend_type_title:"",cat_arts:"",cat_history:"",cat_science:"",cat_nature:"",cat_general:"",cat_unknown:" / "},de:{mode_guided:"Gefhrte Erkundung",mode_semi:"KI-Assistenz",mode_free:"Freie Erkundung",header_spatial:"1. Rumliche Filter",btn_add_location:"+ Ort hinzufgen",header_semantic:"2. Semantische Filter",btn_query:"Suchen",btn_add_condition:"+",label_destination:"Zielort:",placeholder_semi:"z.B. Deutsches Museum",btn_navigate:"Navigieren",btn_thinking:"Nachdenken...",header_results:"Ergebnisse",no_results:"Keine Ergebnisse",legend_title:"Legende",legend_selected:"Ausgewhlt",legend_museum:"Museum",legend_city:"Stadtgebiet",google_mode:"Google 3D Modus",btn_deactivate_ai:"KI Deaktivieren",btn_activate_ai:"KI Aktivieren",agent_name:"Navi-KI",agent_welcome:"Hallo! Ich bin das kollektive Bewusstsein dieses Museums. Wie kann ich helfen?",placeholder_agent:"Geben Sie Ihr Ziel ein...",agent_reset_result:"",mode_label:"Aktueller Modus: ",legend_level_continent:"Kontinent-Ebene",legend_level_country:"Lnder-Ebene",legend_level_city:"Stadt-Ebene",legend_type_title:"Museumstypen",cat_arts:"Kunst & Kultur",cat_history:"Geschichte & Gesellschaft",cat_science:"Wissenschaft & Technik",cat_nature:"Natur & Umwelt",cat_general:"Allgemeines & Service",cat_unknown:"Sonstige / Unbekannt"}}}t(e){return this.dictionary[this.currentLang][e]||e}setLanguage(e){this.dictionary[e]&&(this.currentLang=e,console.log(` Language switched to: ${e}`),this.updatePage())}updatePage(){const e=this.dictionary[this.currentLang];document.querySelectorAll("[data-i18n]").forEach(n=>{const i=n.getAttribute("data-i18n");e[i]&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA"?n.placeholder=e[i]:n.textContent=e[i])}),window.dispatchEvent(new CustomEvent("lang-change",{detail:this.currentLang}))}}class uc{constructor(e){this.routePlanner=e,this.isLoggedIn=!1,this.dom={}}init(){if(console.log(" UserCenter Plugin Initializing..."),this.dom={widget:document.getElementById("user-profile-widget"),avatarBtn:document.getElementById("user-avatar-btn"),panel:document.getElementById("user-panel"),closeBtn:document.getElementById("close-panel-btn"),authDot:document.getElementById("auth-status-dot"),themeToggle:document.getElementById("theme-toggle"),username:document.getElementById("panel-username"),role:document.getElementById("panel-role"),authBtn:document.getElementById("auth-action-btn"),dataToggle:document.getElementById("data-share-toggle"),restrictedBtns:document.querySelectorAll(".disabled-if-guest"),tabs:document.querySelectorAll(".tab-btn"),panes:document.querySelectorAll(".tab-pane"),questionnaireBtn:document.getElementById("btn-open-questionnaire"),questModal:document.getElementById("questionnaire-modal"),questCloseBtn:document.getElementById("close-quest-btn"),questCancelBtn:document.getElementById("btn-cancel-quest"),questSubmitBtn:document.getElementById("btn-submit-quest"),evalBtn:document.getElementById("btn-open-eval"),evalModal:document.getElementById("evaluation-modal"),evalCloseBtn:document.getElementById("close-eval-btn"),evalCancelBtn:document.getElementById("btn-cancel-eval"),evalSubmitBtn:document.getElementById("btn-submit-eval"),starRatings:document.querySelectorAll(".star-rating")},!this.dom.widget||!this.dom.panel){console.warn(" UserCenter: DOM elements not found. Check index.html.");return}this._bindEvents(),this._updateUIState(),this._bindRatingEvents()}_bindEvents(){const e=this.dom;e.avatarBtn.addEventListener("click",o=>{o.stopPropagation(),this.togglePanel()}),e.closeBtn.addEventListener("click",()=>this.togglePanel(!1)),document.addEventListener("click",o=>{if(!e.panel.classList.contains("hidden")){const r=e.panel.contains(o.target),s=e.avatarBtn.contains(o.target),a=e.questModal&&!e.questModal.classList.contains("hidden")&&e.questModal.contains(o.target),l=e.evalModal&&!e.evalModal.classList.contains("hidden")&&e.evalModal.contains(o.target);!r&&!s&&!a&&!l&&this.togglePanel(!1)}}),e.tabs.forEach(o=>{o.addEventListener("click",()=>{e.tabs.forEach(l=>l.classList.remove("active")),o.classList.add("active"),document.querySelectorAll(".tab-pane").forEach(l=>{l.classList.remove("active"),l.style.display="none"});const s=`tab-${o.dataset.tab}`,a=document.getElementById(s);a&&(a.classList.add("active"),a.style.display="block")})}),e.authBtn.addEventListener("click",()=>this.setLoginState(!this.isLoggedIn)),e.restrictedBtns.forEach(o=>{o.addEventListener("click",r=>{this.isLoggedIn?alert(" Submitted Successfully!"):(r.preventDefault(),r.stopPropagation(),alert(" Login Required"))})}),e.themeToggle&&e.themeToggle.addEventListener("change",o=>{o.target.checked?e.panel.classList.add("dark-mode"):e.panel.classList.remove("dark-mode")}),e.questionnaireBtn&&e.questionnaireBtn.addEventListener("click",o=>{o.stopPropagation(),e.questModal&&e.questModal.classList.remove("hidden")});const n=()=>{e.questModal&&e.questModal.classList.add("hidden")};e.questCloseBtn&&e.questCloseBtn.addEventListener("click",o=>{o.stopPropagation(),n()}),e.questCancelBtn&&e.questCancelBtn.addEventListener("click",o=>{o.stopPropagation(),n()}),e.questSubmitBtn&&e.questSubmitBtn.addEventListener("click",o=>{o.stopPropagation(),alert("Suggestion preference updated!")}),e.evalBtn&&e.evalBtn.addEventListener("click",o=>{o.stopPropagation(),e.evalModal&&e.evalModal.classList.remove("hidden")});const i=()=>{e.evalModal&&e.evalModal.classList.add("hidden")};e.evalCloseBtn&&e.evalCloseBtn.addEventListener("click",o=>{o.stopPropagation(),i()}),e.evalCancelBtn&&e.evalCancelBtn.addEventListener("click",o=>{o.stopPropagation(),i()}),e.evalSubmitBtn&&e.evalSubmitBtn.addEventListener("click",async o=>{o.stopPropagation();const r={efficiency:document.getElementById("eval-efficiency").value};await fetch("http://localhost:3000/api/submit-evaluation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),alert("Thank you for your feedback!"),window.AgentController&&window.AgentController.addMessage("system","Thank you! Your feedback helps me learn. ")})}_bindRatingEvents(){this.dom.starRatings&&this.dom.starRatings.forEach(e=>{const n=e.querySelectorAll("span"),i=e.querySelector("input");n.forEach((o,r)=>{o.addEventListener("click",()=>{const s=r+1;i.value=s,n.forEach((a,l)=>{l<s?a.classList.add("selected"):a.classList.remove("selected")})})})})}togglePanel(e){const n=this.dom.panel;typeof e<"u"?e?n.classList.remove("hidden"):n.classList.add("hidden"):n.classList.toggle("hidden")}setLoginState(e){this.isLoggedIn=e,this._updateUIState(),console.log(`[UserCenter] Auth State Changed: ${e?"Logged In":"Guest"}`)}_updateUIState(){const e=this.dom;this.isLoggedIn?(e.username.textContent="Traveler Alpha",e.role.textContent="Contributor",e.role.classList.add("active"),e.authDot.classList.remove("offline"),e.authDot.classList.add("online"),e.authBtn.textContent="Log Out",e.authBtn.classList.add("logout"),e.dataToggle.disabled=!1,e.dataToggle.checked=!0,e.restrictedBtns.forEach(n=>{n.classList.remove("disabled-if-guest")})):(e.username.textContent="Guest Visitor",e.role.textContent="Local Mode",e.role.classList.remove("active"),e.authDot.classList.remove("online"),e.authDot.classList.add("offline"),e.authBtn.textContent="Log In / Sign Up",e.authBtn.classList.remove("logout"),e.dataToggle.disabled=!0,e.dataToggle.checked=!1,e.restrictedBtns.forEach(n=>{n.classList.add("disabled-if-guest")}))}}function dc(){const e=document.createElement("canvas");e.width=96,e.height=96;const n=e.getContext("2d"),i=96/2;return n.translate(i,i),n.shadowColor="#D90429",n.shadowBlur=20,n.fillStyle="#FFFFFF",n.beginPath(),n.moveTo(0,-40),n.lineTo(30,30),n.lineTo(0,15),n.lineTo(-30,30),n.closePath(),n.fill(),e.toDataURL()}const fc=dc();class pc{constructor(e,n){this.viewer=e,this.dataSource=n,this.routeEntities=[],this.originalStats=new Map,console.log(" RoutePlanner: Smart Matching Ready")}async generateRoute(e){window.AgentController&&(window.AgentController.addMessage("system","Thinking... "),window.AgentController.userRole==="guest"&&window.AgentController.setUserRole("user"));try{const i=await(await fetch("http://localhost:3000/api/plan-route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();i.success&&i.data?this.visualizeRoute(i.data.route):window.AgentController&&window.AgentController.addMessage("system","Sorry, I got confused.")}catch(n){console.error("Route Error:",n),window.AgentController&&window.AgentController.addMessage("system","Server connection failed.")}}findBestMatchingEntity(e,n){const i=n.trim().toLowerCase();let o=null,r=-1;const s=Cesium.JulianDate.now();return e.forEach(a=>{let l=a.name||"";if(a.properties&&a.properties.general){const f=a.properties.general.getValue(s);f&&f.name&&(l=f.name)}const c=l.trim().toLowerCase();let d=0;if(c===i)d=100;else if(c.startsWith(i))d=80;else if(c.includes(i))d=50;else return;const p=Math.abs(c.length-i.length);d-=p,d>r&&(r=d,o=a)}),o}visualizeRoute(e){if(this.resetMapVisuals(),!this.dataSource)return;const n=this.dataSource.entities.values,i=[],o=new Set,r=Cesium.JulianDate.now();if(console.log(" Visualizing Route (Smart Match)..."),n.forEach(s=>{if(s.billboard&&!this.originalStats.has(s.id)){let a=s.billboard.color;a&&a.getValue&&(a=a.getValue(r));let l=s.billboard.scale;l&&l.getValue&&(l=l.getValue(r)),this.originalStats.set(s.id,{color:a?a.clone():Cesium.Color.WHITE.clone(),scale:l||.6})}}),e.forEach((s,a)=>{const l=this.findBestMatchingEntity(n,s.name);if(l){o.add(l.id);const c=l.position.getValue(r);(i.length===0||Cesium.Cartesian3.distance(i[i.length-1],c)>5)&&i.push(c),this.addStaticMarker(c,a+1)}else console.warn(` Could not find location for: ${s.name}`)}),n.forEach(s=>{if(s.billboard)if(o.has(s.id)){if(this.originalStats.has(s.id)){const a=this.originalStats.get(s.id);s.billboard.color=a.color,s.billboard.scale=1}}else s.billboard.color=new Cesium.Color(1,1,1,.2),s.billboard.scale=.5}),i.length>1&&(this.routeEntities.push(this.viewer.entities.add({polyline:{positions:i,width:5,material:new Cesium.PolylineDashMaterialProperty({color:Cesium.Color.fromCssColorString("#D90429"),dashLength:20}),clampToGround:!0}})),this.startEntityAnimation(i)),i.length>0){const s=Cesium.BoundingSphere.fromPoints(i);this.viewer.camera.flyToBoundingSphere(s,{offset:new Cesium.HeadingPitchRange(0,-Cesium.Math.PI_OVER_FOUR*2,s.radius*2.5),duration:2})}}startEntityAnimation(e){if(e.length<2)return;let n=0;const i=[];for(let a=0;a<e.length-1;a++){const l=e[a],c=e[a+1],d=Cesium.Cartesian3.distance(l,c);i.push({startDist:n,length:d,p1:l,p2:c}),n+=d}const o=1e4,r=Date.now(),s=this.viewer.entities.add({position:new Cesium.CallbackProperty(()=>{const c=(Date.now()-r)%o/o*n;let d=i.find(f=>c>=f.startDist&&c<f.startDist+f.length);d||(d=i[i.length-1]);const p=(c-d.startDist)/d.length;return Cesium.Cartesian3.lerp(d.p1,d.p2,p,new Cesium.Cartesian3)},!1),billboard:{image:fc,scale:.5,color:Cesium.Color.WHITE,heightReference:Cesium.HeightReference.RELATIVE_TO_GROUND,pixelOffset:new Cesium.Cartesian2(0,-5),disableDepthTestDistance:Number.POSITIVE_INFINITY,rotation:new Cesium.CallbackProperty(()=>{const c=(Date.now()-r)%o/o*n;let d=i.find(E=>c>=E.startDist&&c<E.startDist+E.length);d||(d=i[i.length-1]);const p=Cesium.Cartographic.fromCartesian(d.p1),f=Cesium.Cartographic.fromCartesian(d.p2),m=Math.sin(f.longitude-p.longitude)*Math.cos(f.latitude),y=Math.cos(p.latitude)*Math.sin(f.latitude)-Math.sin(p.latitude)*Math.cos(f.latitude)*Math.cos(f.longitude-p.longitude);return-Math.atan2(m,y)},!1),alignedAxis:Cesium.Cartesian3.UNIT_Z}});this.routeEntities.push(s)}addStaticMarker(e,n){this.routeEntities.push(this.viewer.entities.add({position:e,point:{pixelSize:16,color:Cesium.Color.fromCssColorString("#D90429"),outlineColor:Cesium.Color.WHITE,outlineWidth:2,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND}})),this.routeEntities.push(this.viewer.entities.add({position:e,label:{text:`${n}`,font:"bold 16px sans-serif",fillColor:Cesium.Color.WHITE,style:Cesium.LabelStyle.FILL_AND_OUTLINE,outlineWidth:4,outlineColor:Cesium.Color.fromCssColorString("#D90429"),verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-15),heightReference:Cesium.HeightReference.CLAMP_TO_GROUND}}))}resetMapVisuals(){this.routeEntities.forEach(e=>this.viewer.entities.remove(e)),this.routeEntities=[],this.dataSource&&this.dataSource.entities.values.forEach(n=>{if(n.billboard&&this.originalStats.has(n.id)){const i=this.originalStats.get(n.id);n.billboard.color=i.color,n.billboard.scale=i.scale}}),console.log(" Map Visuals Restored")}clearRoute(){this.resetMapVisuals()}}class hc{constructor(e,n){this.viewer=e,this.dataSource=n,this.userRole="guest",this.isLoaded=!1,this.app=null,this.model=null,this.dom={container:document.getElementById("agent-container"),avatar:document.getElementById("agent-avatar"),dialog:document.getElementById("agent-dialog-box"),closeBtn:document.querySelector(".close-dialog-btn"),input:document.getElementById("agent-input"),sendBtn:document.getElementById("agent-send-btn"),history:document.getElementById("chat-history")}}init(){if(!this.dom.input||!this.dom.sendBtn){console.error(" [NaviAgent]  DOM  index.html ID  agent-input / agent-send-btn");return}this.dom.avatar&&this.dom.avatar.addEventListener("click",n=>{if(n.stopPropagation(),this.toggleDialog(),this.model)try{this.model.motion("Tap")}catch{}}),this.dom.closeBtn&&this.dom.closeBtn.addEventListener("click",n=>{n.stopPropagation(),this.toggleDialog(!1),this.exitSupervisedMode()}),this.dom.sendBtn.addEventListener("click",()=>this.handleSend());const e=this.dom.input;e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"}),e.addEventListener("keydown",n=>{if(n.key==="Enter"){if(n.shiftKey)return;n.preventDefault(),this.handleSend()}}),console.log("[NaviAgent] Online & Ready.")}toggleDialog(e){if(!this.dom.dialog)return;const n=!this.dom.dialog.classList.contains("hidden");(typeof e<"u"?e:!n)?(this.dom.dialog.classList.remove("hidden"),this.dom.input&&setTimeout(()=>this.dom.input.focus(),50)):this.dom.dialog.classList.add("hidden")}exitSupervisedMode(){console.log(" Exiting Supervised Mode..."),window.UserCenter&&window.UserCenter.routePlanner&&window.UserCenter.routePlanner.resetMapVisuals()}async setUserRole(e){this.userRole=e,console.log(`[NaviAgent] Role switched to: ${e}`),e==="guest"?(this.dom.container&&this.dom.container.classList.add("hidden"),this.toggleDialog(!1),this.exitSupervisedMode()):(this.dom.container&&this.dom.container.classList.remove("hidden"),this.isLoaded||await this.loadLive2D()),window.AgentController=this}async loadLive2D(){if(!this.isLoaded){if(!window.PIXI||!window.PIXI.live2d){console.warn("PIXI/Live2D not found");return}try{const e=document.getElementById("live2d-canvas");if(!e)return;const{Live2DModel:n}=window.PIXI.live2d;this.app=new PIXI.Application({view:e,autoStart:!0,backgroundAlpha:0,width:400,height:400});const i="./data/agent/shizuku.model.json";this.model=await n.from(i),this.model.anchor.set(.5,.5),this.model.position.set(200,250),this.model.scale.set(.4),this.model.on("hit",()=>this.model.motion("Tap")),this.app.stage.addChild(this.model),this.isLoaded=!0,console.log(" Live2D Model Loaded")}catch(e){console.warn("Live2D Load Failed:",e)}}}async handleSend(){typeof window.stopEarthRotation=="function"&&window.stopEarthRotation();const e=this.dom.input.value.trim();if(!e)return;this.addMessage("user",e),this.dom.input.value="",this.dom.input.style.height="auto";const n=this.addMessage("system","Thinking... ");this.model&&this.model.motion("Tap");try{const o=await(await fetch("http://localhost:3000/api/plan-route",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({specificPlaces:e,interests:[],duration:"4h"})})).json(),r=document.getElementById(n);if(r&&r.remove(),o.success&&o.data){const{reasoning:s,route:a}=o.data;let l="";a&&a.length>0&&(l=a.map((d,p)=>{const f=d.visit_time?` (${d.visit_time})`:"";return`
${p+1}. ${d.name}${f}`}).join(""));let c=s;a&&a.length>0&&(c+=`

 **Plan:**${l}`,window.UserCenter&&window.UserCenter.routePlanner&&window.UserCenter.routePlanner.visualizeRoute(a)),this.addMessage("system",c),this.model&&this.model.motion("Tap")}else this.addMessage("system","Sorry, I couldn't understand that.")}catch(i){console.error(i);const o=document.getElementById(n);o&&o.remove(),this.addMessage("system","Server Offline ")}}addMessage(e,n){if(!this.dom.history)return null;const i=document.createElement("div");return i.className=`msg ${e}`,i.textContent=n,i.id="msg-"+Date.now(),this.dom.history.appendChild(i),this.dom.history.scrollTop=this.dom.history.scrollHeight,i.id}}const ee=new cc;window.i18n=ee;const vo={isBusy:!1,async ask(t){if(this.isBusy)return console.warn("[AI Service] AI ..."),alert("AI "),null;this.isBusy=!0,document.body.style.cursor="wait";try{console.log(`[AI Service] : "${t}"`);const e=await fetch("http://localhost:3000/api/semantic-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})});if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);const n=await e.json();return n.success?n.data:null}catch(e){return console.error("[AI Service] :",e),alert(" AI  Ollama "),null}finally{this.isBusy=!1,document.body.style.cursor="default"}}},Y={currentMode:"free",selectedEntity:null,tippyInstance:null};let V,me,vn,Ae={};const Ze={container:document.getElementById("query-builder-container"),btnAdd:document.getElementById("add-condition-btn"),btnQuery:document.getElementById("apply-filter-btn"),btnReset:document.getElementById("reset-all-btn")},mc=new Cesium.DistanceDisplayCondition(0,3e4),gc=new Cesium.DistanceDisplayCondition(3e4,3e5),vc=new Cesium.DistanceDisplayCondition(15e4,35e5),yc=new Cesium.DistanceDisplayCondition(35e5,Number.MAX_VALUE),bc=["Agriculture","Archaeology","Architecture","Archives","Art","Automotive","Crafts","Culture","Design","Economy","Education","Ethnology","Family","History","Literature","Medicine","Memorial","Monument","Nature","Photography","Religion","Research","Science","Service","Social","Sports","Technology","Theater"],wc={Art:"Arts & Culture",Architecture:"Arts & Culture",Crafts:"Arts & Culture",Culture:"Arts & Culture",Design:"Arts & Culture",Literature:"Arts & Culture",Theater:"Arts & Culture",Photography:"Arts & Culture",History:"History & Society",Archaeology:"History & Society",Ethnology:"History & Society",Religion:"History & Society",Archives:"History & Society",Memorial:"History & Society",Monument:"History & Society",Family:"History & Society",Social:"History & Society",Science:"Science & Tech",Technology:"Science & Tech",Automotive:"Science & Tech",Medicine:"Science & Tech",Research:"Science & Tech",Economy:"Science & Tech",Nature:"Nature & Env",Agriculture:"Nature & Env",Service:"General",Education:"General",Sports:"General","":"Unknown"},ei={"Arts & Culture":"#FF006E","History & Society":"#FB5607","Science & Tech":"#3A86FF","Nature & Env":"#8338EC",General:"#FFBE0B",Unknown:"#CCCCCC"},Ec={"Arts & Culture":"cat_arts","History & Society":"cat_history","Science & Tech":"cat_science","Nature & Env":"cat_nature",General:"cat_general",Unknown:"cat_unknown"},Cc="./map_marker.svg",_c="M12 2C7.589 2 4 5.589 4 10s0 10 8 12c8 -2 8 -8 8 -12s-3.589 -8 -8 -8z",xc="M12 7L6 11H18L12 7ZM7 12H9V16H7V12ZM11 12H13V16H11V12ZM15 12H17V16H15V12ZM6 17H18V19H6V17Z";function Sc(t){const e=document.createElement("canvas");e.width=48,e.height=48;const n=e.getContext("2d");n.scale(2,2);const i=new Path2D(_c);n.fillStyle=t,n.fill(i),n.save(),n.translate(1,0),n.scale(.9,.9);const o=new Path2D(xc);return n.fillStyle="#000000",n.fill(o),n.restore(),e}function yo(t){const e=Array.isArray(t)?t[0]:t,n=wc[e]||"Unknown";return Cesium.Color.fromCssColorString(ei[n])}function Si(){Y.selectedEntity&&Y.selectedEntity.billboard&&(Y.selectedEntity.billboard.scale=.5),Y.selectedEntity=null,V&&(V.selectedEntity=void 0),Y.tippyInstance&&Y.tippyInstance.hide()}function sr(t){Si(),Y.selectedEntity=t,V.selectedEntity=t,t.billboard&&(t.billboard.scale=1);const e=t.properties,n=e.general.getValue(),i=e.online.getValue(),o=e.offline.getValue();let r="Unknown";n.category&&(r=Array.isArray(n.category)?n.category.join(", "):n.category);const a=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n.name)}`,l=`
    <div style="padding: 10px; max-width: 250px; font-family: sans-serif; background-color: #2c2c2e; color: #ffffff;">
      <h3 style="font-size: 1.1em; margin-bottom: 5px; color: #D90429;">${n.name}</h3>
      <div style="font-size: 0.8em; color: #aaa; margin-bottom: 8px; font-style: italic;">
        ${r}
      </div>
      <p style="font-size: 0.9em; margin-bottom: 8px;">${n.description}</p>
      <hr style="border: 0; border-top: 1px solid #555; margin: 8px 0;">
      <p style="font-size: 0.8em; margin: 5px 0;">
        <strong>Address:</strong> ${o.address}
      </p>
      ${i.website?`<a href="${i.website}" target="_blank" rel="noopener noreferrer" style="color: #007bff; font-size: 0.9em; text-decoration: none;">Visit Website</a>`:""}
      <a href="${a}" target="_blank" rel="noopener noreferrer" style="color: #4285F4; font-size: 0.9em; text-decoration: none;">
            Open in Google Maps
      </a>
      </div>
  `;Y.tippyInstance.setContent(l),Y.tippyInstance.show();const c=document.querySelector("#results-list li.active");c&&c.classList.remove("active");const d=document.querySelector(`#results-list li[data-id="${t.id}"]`);d&&(d.classList.add("active"),d.scrollIntoView({behavior:"smooth",block:"center"}))}function hn(t){if(Y.currentMode===t)return;Y.currentMode=t,console.log(`Switched to ${t} mode.`),Si(),ar();const e=me.entities.values;if(t==="free"||t==="semi"){e.forEach(i=>{i.show=!0});const n=document.getElementById("results-panel");n&&n.classList.add("hidden")}else{e.forEach(o=>{o.show=!1});const n=document.getElementById("results-list"),i=document.getElementById("results-panel");n&&n.children.length>0&&i.classList.remove("hidden")}}function Vt(t){if(!t||t==="all")return null;const e=t.trim().toLowerCase(),n=o=>{if(!o.properties)return!1;const r=["name","Name","NAME","CONTINENT","continent","city","CITY","admin","sovereignt"];for(const s of r)if(o.properties.hasProperty(s)){const a=o.properties[s].getValue();if(a&&String(a).toLowerCase()===e)return!0}return!1};let i=null;return At&&(i=At.entities.values.find(n)),!i&&Tt&&(i=Tt.entities.values.find(n)),!i&&St&&(i=St.entities.values.find(n)),i}function Rt(t,e){const n=Vt(t);if(!n){console.warn(` ${t} `);return}let i=5e4;V.flyTo(n,{duration:1.5,offset:new Cesium.HeadingPitchRange(0,-Math.PI/2,i)})}function mt(){const t=document.createElement("div");t.className="spatial-row";const e=$n("Continent"),n=$n("Country",!0),i=$n("City",!0),o=document.createElement("button");o.className="spatial-remove-btn",o.innerHTML="&times;",o.onclick=()=>{t.remove();const a=document.getElementById("spatial-builder-container");a&&a.children.length===0&&mt()},Un(e,new Set(Object.keys(Ae)));const r=(a,l)=>{const c=Vt(a);if(!c)return;let d;l==="city"?d=new Cesium.HeadingPitchRange(0,-Math.PI/2,5e4):l==="country"?d=new Cesium.HeadingPitchRange(0,-Math.PI/2,2e6):l==="continent"&&(d=new Cesium.HeadingPitchRange(0,-Math.PI/2,1e7)),V.flyTo(c,{duration:1.5,offset:d})};e.addEventListener("change",()=>{const a=e.value,l=a==="all";if(Vn(n,"Country",l),Vn(i,"City",!0),!l&&Ae[a]){const c=Object.keys(Ae[a]);Un(n,new Set(c)),r(a,"continent")}}),n.addEventListener("change",()=>{const a=e.value,l=n.value,c=l==="all";if(Vn(i,"City",c),!c&&Ae[a]&&Ae[a][l]){const d=Ae[a][l];Un(i,d),r(l,"country")}else c&&r(a,"continent")}),i.addEventListener("change",()=>{const a=i.value;a!=="all"?r(a,"city"):r(n.value,"country")}),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o);const s=document.getElementById("spatial-builder-container");s&&s.appendChild(t)}function Tc(){const t=document.createElement("div");t.className="query-row",t.style.display="flex",t.style.alignItems="center",t.style.gap="8px",t.style.marginBottom="10px";const e=document.createElement("select");e.className="q-field",e.style.width="83px",e.style.flexShrink="0",e.style.padding="5px",e.style.backgroundColor="#333",e.style.color="#fff",e.style.border="1px solid #555",e.style.borderRadius="4px",[{label:"Category",path:"general.category"},{label:"Name",path:"general.name"}].forEach(l=>{e.innerHTML+=`<option value="${l.path}">${l.label}</option>`});const i=document.createElement("select");i.className="q-op",i.style.width="83px",i.style.flexShrink="0",i.style.padding="5px",i.style.backgroundColor="#333",i.style.color="#fff",i.style.border="1px solid #555",i.style.borderRadius="4px",i.innerHTML='<option value="contains">Contains</option><option value="equals">Equals</option>';const o=document.createElement("div");o.style.flex="1",o.style.display="flex";const r=()=>{const l=document.createElement("input");return l.className="q-val",l.type="text",l.placeholder="Enter name...",l.style.width="100%",l},s=()=>{const l=document.createElement("select");return l.className="q-val",l.innerHTML='<option value="" disabled selected>Select Category...</option>',bc.sort().forEach(c=>{l.innerHTML+=`<option value="${c}">${c}</option>`}),l};o.appendChild(s()),e.addEventListener("change",()=>{o.innerHTML="",e.value==="general.category"?o.appendChild(s()):o.appendChild(r())});const a=document.createElement("button");a.className="remove-row-btn",a.textContent="",a.onclick=()=>t.remove(),t.appendChild(e),t.appendChild(i),t.appendChild(o),t.appendChild(a),Ze&&Ze.container&&Ze.container.appendChild(t)}function Vn(t,e,n){t.innerHTML=`<option value="all">${e}</option>`,t.disabled=n}const bo=document.getElementById("add-spatial-btn");bo&&bo.addEventListener("click",mt);function $n(t,e=!1){const n=document.createElement("select");return n.className="fixed-filter",n.style.flex="1",n.innerHTML=`<option value="all">${t}</option>`,n.disabled=e,n}function Un(t,e){e.forEach(n=>t.innerHTML+=`<option value="${n}">${n}</option>`)}function Ac(){console.log(" Executing Hybrid Query...");const t=document.querySelectorAll(".spatial-row"),e=document.querySelectorAll(".query-row"),n=me.entities.values;let i=0;vn.innerHTML="",n.forEach(r=>{const s=r.properties.general.getValue();let a=!1,l=!0;t.forEach(p=>{p.querySelectorAll("select")[0].value!=="all"&&(l=!1)}),l?a=!0:a=Array.from(t).some(p=>{const f=p.querySelectorAll("select"),m=f[0].value,y=f[1].value,b=f[2].value;return!(m==="all"||m!=="all"&&s.continent!==m||y!=="all"&&s.country!==y||b!=="all"&&s.city!==b)});let c=!0;a?e.forEach(p=>{e.forEach(f=>{const m=f.querySelector(".q-field"),y=f.querySelector(".q-op"),b=f.querySelector(".q-val");if(!m||!y||!b)return;const E=m.value,C=y.value,_=b.value.toLowerCase();if(!_)return;const[S,u]=E.split(".");if(!r.properties||!r.properties[S]){c=!1;return}const x=r.properties[S].getValue(),h=x?x[u]:null;if(h==null){c=!1;return}let w=!1;if(Array.isArray(h))w=h.some(A=>String(A).toLowerCase().includes(_));else{const A=String(h).toLowerCase();C==="equals"?w=A===_:w=A.includes(_)}w||(c=!1)})}):c=!1;const d=a&&c;if(r.show=d,d){i++;const p=document.createElement("li");p.textContent=s.name,p.dataset.id=r.id,p.addEventListener("click",()=>{sr(r),V.flyTo(r,{offset:new Cesium.HeadingPitchRange(0,-Math.PI*5/8,4e3)})}),vn.appendChild(p)}}),document.getElementById("results-count").textContent=`(${i})`,i===0&&(vn.innerHTML="<li>No results</li>");const o=document.getElementById("results-panel");o&&o.classList.remove("hidden")}Ze.btnAdd&&Ze.btnAdd.addEventListener("click",Tc);Ze.btnQuery&&Ze.btnQuery.addEventListener("click",Ac);const Oc=document.getElementById("semi-search-input"),ft=document.getElementById("semi-search-btn");async function Lc(){const t=Oc.value;if(t&&!vo.isBusy){console.log(`[Client] Start asking AI: "${t}"...`),ft.textContent=ee.t("btn_thinking"),ft.disabled=!0;try{const e=await vo.ask(t);if(e){console.log("[Client] Semi :",e);let n=null,i="";if(e.city&&(n=Vt(e.city),n&&(i="city")),!n&&e.country&&(n=Vt(e.country),n&&(i="country")),!n&&e.continent&&(n=Vt(e.continent),n&&(i="continent")),n){const o=n.properties.name?n.properties.name.getValue():"Unknown Area";console.log(`[Client] hits level: [${i}] -> ${n.properties.name.getValue()}`);let r;if(i==="city"){let a;if(console.log("[Client]  :  40000"),n.polygon&&n.polygon.hierarchy){const c=n.polygon.hierarchy.getValue(V.clock.currentTime).positions;let d=0,p=0,f=0;c.forEach(y=>{d+=y.x,p+=y.y,f+=y.z});const m=c.length;a=new Cesium.Cartesian3(d/m,p/m,f/m)}else a=n.position.getValue(V.clock.currentTime);if(a){const l=Cesium.Cartographic.fromCartesian(a);l.height=4e4;const c=Cesium.Cartographic.toCartesian(l);V.camera.flyTo({destination:c,duration:2,orientation:{heading:0,pitch:-Math.PI/2,roll:0}})}}else{let s;i==="country"?s=new Cesium.HeadingPitchRange(0,-Math.PI/2,2e6):i==="continent"&&(s=new Cesium.HeadingPitchRange(0,-Math.PI/2,5e6)),V.flyTo(n,{duration:2,offset:s})}}}else console.warn(`[Client] AI  ${e.city||e.country}`),alert(ee.t("no_result")||"Map data not found for this location.")}catch(e){console.error("[Client] :",e),alert("")}finally{ft.textContent=ee.t("btn_navigate"),ft.disabled=!1}}}ft&&ft.addEventListener("click",Lc);function Gt(){const t=document.getElementById("mock-login-btn");if(!t)return;const e=window.AgentController?window.AgentController.userRole:"guest",n=e==="guest"?"btn_activate_ai":"btn_deactivate_ai";t.textContent=ee.t(n),e!=="guest"?t.classList.add("active"):t.classList.remove("active")}function ar(){const t=document.getElementById("mode-indicator");if(!t)return;const e=Y.currentMode;let n="";switch(e){case"free":n="mode_free";break;case"guided":n="mode_guided";break;case"semi":n="mode_semi";break;default:n="mode_free"}t.textContent=`${ee.t("mode_label")} ${ee.t(n)}`}const wo=document.getElementById("mock-login-btn");wo&&wo.addEventListener("click",()=>{const e=AgentController.userRole==="guest"?"user":"guest";AgentController.setUserRole(e),Gt()});window.addEventListener("lang-change",()=>{Gt(),ar(),cr()});Gt();Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkZGJiMWRmYS03MzdhLTQyMWYtYjAxMS0yNTg2OTc3ZjVkOTciLCJpZCI6MzMzMjk1LCJpYXQiOjE3NTU1OTUwMzJ9.eQAIvY4xLQw-H2Q1GAZ1yWL8afkTQeVhsWfBPQJOUkU";V=new Cesium.Viewer("cesium-container",{timeline:!1,animation:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,baseLayerPicker:!1,navigationHelpButton:!1,infoBox:!1,selectionIndicator:!1});V.camera.setView({destination:Cesium.Cartesian3.fromDegrees(11.576124,48.137154,15e6),orientation:{heading:0,pitch:-Math.PI/2,roll:0}});const lr=new lc;lr.init(V);const Eo=document.getElementById("google-mode-toggle");Eo&&Eo.addEventListener("change",t=>{const e=t.target.checked;lr.toggleGoogleMode(e)});me=new Cesium.GeoJsonDataSource("museums");V.dataSources.add(me);let St,Tt,At;St=new Cesium.GeoJsonDataSource("europe");Tt=new Cesium.GeoJsonDataSource("germany");At=new Cesium.GeoJsonDataSource("munich");V.dataSources.add(St);V.dataSources.add(Tt);V.dataSources.add(At);function ti(){const t={};return St.entities.values.forEach(e=>{const n=jn(e);n&&!t[n]&&(t[n]={})}),Tt.entities.values.forEach(e=>{const n=jn(e),i=qn(e,"continent")||"Others";t[i]||(t[i]={}),t[i][n]||(t[i][n]=new Set)}),At.entities.values.forEach(e=>{const n=jn(e),i=qn(e,"continent")||"Europe",o=qn(e,"country")||"Germany";t[i]||(t[i]={}),t[i][o]||(t[i][o]=new Set),t[i][o].add(n)}),console.log(" :",t),t}function jn(t){const e=["name","NAME","Name","CONTINENT","admin","sovereignt"];for(const n of e)if(t.properties&&t.properties.hasProperty(n))return t.properties[n].getValue();return null}function qn(t,e){return t.properties&&t.properties.hasProperty(e)?t.properties[e].getValue():null}function Ti(t,e,n,i,o=!0){const r=o?n:Cesium.Color.TRANSPARENT,s=o?3:0;return t.load(e,{stroke:Cesium.Color.fromCssColorString("#ffffff"),strokeWidth:s,fill:r}).then(a=>{const l=a.entities.values;console.log(` : ${e} (Visible: ${o}, Count: ${l.length})`);for(let c=0;c<l.length;c++){const d=l[c];if(d.show=!0,d.polygon&&(d.polygon.distanceDisplayCondition=i,d.polygon.heightReference=Cesium.HeightReference.CLAMP_TO_GROUND,o?d.polygon.outline=!0:d.polygon.outline=!1),d.properties&&!d.properties.hasProperty("name")){const p=["CONTINENT","continent","NAME","Name","admin","sovereignt","city","CITY"];for(const f of p)if(d.properties.hasProperty(f)){d.properties.addProperty("name",d.properties[f].getValue());break}}}return a}).catch(a=>console.error(` : ${e}`,a))}const Ic=Ti(St,"./data/World_Continen_FeaturesToJSO2.geojson",Cesium.Color.fromCssColorString("#ffffff").withAlpha(.05),yc,!1),Mc=Ti(Tt,"./data/worldadministr_FeaturesToJSO1.geojson",Cesium.Color.fromCssColorString("#ffffff").withAlpha(.05),vc,!1),Dc=Ti(At,"./data/germany_counti_FeaturesToJSO1.geojson",Cesium.Color.fromCssColorString("#ffffff").withAlpha(.05),gc,!0),Pc=me.load("./data/Munich_museums(en)_updated1.geojson",{markerSize:24}).then(async t=>{console.log("!"),vn=document.getElementById("results-list"),document.getElementById("results-panel");const e=3e6,n=5e5,i=4e4,o=new Cesium.DistanceDisplayCondition(e,Number.MAX_VALUE),r=new Cesium.DistanceDisplayCondition(n,e),s=new Cesium.DistanceDisplayCondition(i,n),a=new Cesium.DistanceDisplayCondition(0,i),l={continents:{},countries:{},cities:{}};t.entities.values.forEach(h=>{let w={};h.properties.hasProperty("general")?w=h.properties.general.getValue():w={continent:h.properties.continent?h.properties.continent.getValue():"Unknown",country:h.properties.country?h.properties.country.getValue():"Unknown",city:h.properties.city?h.properties.city.getValue():"Unknown"};const A=h.position.getValue(V.clock.currentTime);if(!A)return;const L=(O,M,k)=>{M&&(O[M]||(O[M]={count:0,positions:[]}),O[M].count++,O[M].positions.push(k))};L(l.continents,w.continent,A),L(l.countries,w.country,A),L(l.cities,w.city,A);let v="Unknown";if(h.properties.hasProperty("general")){const O=h.properties.general.getValue();O&&O.category&&(v=O.category)}h.billboard&&(h.billboard.color=yo(v),h.billboard.scale=.8,h.billboard.distanceDisplayCondition=a);const T=yo(v);h.billboard&&(h.billboard.image=Cc,h.billboard.color=T,h.billboard.scale=.5,h.billboard.verticalOrigin=Cesium.VerticalOrigin.BOTTOM,h.billboard.distanceDisplayCondition=a,h.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY)});const d={Mnchen:Cesium.Cartesian3.fromDegrees(11.576124,48.137154,100),Munich:Cesium.Cartesian3.fromDegrees(11.576124,48.137154,100)},p=(h,w,A,L,v=1)=>{let T;if(d[h])T=d[h];else{let k=0,B=0,N=0;w.positions.forEach(U=>{k+=U.x,B+=U.y,N+=U.z});const P=w.positions.length;if(P===0)return;T=new Cesium.Cartesian3(k/P,B/P,N/P)}const O=30*v,M=O/2;V.entities.add({position:T,point:{pixelSize:O,color:Cesium.Color.fromCssColorString(L),outlineColor:Cesium.Color.WHITE,outlineWidth:3,distanceDisplayCondition:A,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY},label:{text:`${h}
${w.count}`,font:`bold ${14*v}px sans-serif`,style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.WHITE,outlineColor:Cesium.Color.BLACK,outlineWidth:2,showBackground:!0,backgroundColor:Cesium.Color.fromCssColorString("#000000").withAlpha(.6),backgroundPadding:new Cesium.Cartesian2(7,5),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.TOP,pixelOffset:new Cesium.Cartesian2(0,M+5),distanceDisplayCondition:A,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY}})};Object.keys(l.continents).forEach(h=>{p(h,l.continents[h],o,"#7209b7",1.2)}),Object.keys(l.countries).forEach(h=>{p(h,l.countries[h],r,"#f4a261",1.1)}),Object.keys(l.cities).forEach(h=>{p(h,l.cities[h],s,"#D90429",1)}),console.log(" !"),t.clustering.enabled=!1,me.entities.values.forEach(h=>{h.billboard&&(h.billboard.distanceDisplayCondition=mc)}),Y.tippyInstance=Xt(document.body,{content:"Loading...",trigger:"manual",allowHTML:!0,interactive:!0,placement:"right-start",arrow:!0,getReferenceClientRect:()=>new DOMRect(0,0,0,0)}),V.scene.preRender.addEventListener(function(){if(Y.selectedEntity){const h=Y.selectedEntity.position.getValue(V.clock.currentTime),w=V.scene.cartesianToCanvasCoordinates(h);w&&Y.tippyInstance.setProps({getReferenceClientRect:()=>new DOMRect(w.x,w.y,0,0)})}else Y.tippyInstance&&Y.tippyInstance.hide()});const f=document.getElementById("sidebar"),m=document.getElementById("sidebar-toggle-btn");m.addEventListener("click",()=>{f.classList.toggle("collapsed"),m.title=f.classList.contains("collapsed")?"Expand Menu":"Collapse Menu",f.classList.contains("collapsed")&&E()});const y=document.querySelectorAll(".sidebar-toggle"),b=document.querySelectorAll(".parameter-area");function E(){b.forEach(h=>h.classList.remove("active")),y.forEach(h=>h.classList.remove("active-toggle"))}y.forEach(h=>{h.addEventListener("click",()=>{f.classList.contains("collapsed")&&f.classList.remove("collapsed");const w=h.id.replace("btn-","params-"),A=document.getElementById(w);if(!A)E();else{const L=A.classList.contains("active");E(),L||(A.classList.add("active"),h.classList.add("active-toggle"))}h.id==="btn-guided"?hn("guided"):h.id==="btn-semi"?hn("semi"):h.id==="btn-free"&&hn("free")})}),document.getElementById("btn-free").addEventListener("click",()=>{f.classList.contains("collapsed")||(E(),hn("free"))}),new Cesium.ScreenSpaceEventHandler(V.scene.canvas).setInputAction(function(h){const w=V.scene.pick(h.position);w&&w.id&&me.entities.contains(w.id)?sr(w.id):Si()},Cesium.ScreenSpaceEventType.LEFT_CLICK),Ae=ti(),console.log(" :",Ae);const _=document.getElementById("spatial-builder-container");_&&(_.innerHTML="",mt());function S(h,w,A=!1){const L=document.createElement("div");L.style.marginBottom="10px";const v=document.createElement("label");v.textContent=w,v.style.display="block",v.style.fontSize="0.85em",v.style.color="#aaa",v.style.marginBottom="5px";const T=document.createElement("select");return T.id=h,T.className="fixed-filter",T.disabled=A,T.style.width="100%",T.style.padding="8px",T.style.backgroundColor="#333",T.style.color="white",T.style.border="1px solid #444",T.style.borderRadius="4px",L.appendChild(v),L.appendChild(T),{wrapper:L,select:T}}if(_){_.innerHTML="";const h=S("spatial-continent","Continent"),w=S("spatial-country","Country",!0),A=S("spatial-city","City/Area",!0);_.appendChild(h.wrapper),_.appendChild(w.wrapper),_.appendChild(A.wrapper);var u={continent:h.select,country:w.select,city:A.select}}function x(){if(!u)return;const h={};me.entities.values.forEach(w=>{const A=w.properties.general.getValue(),L=A.continent,v=A.country,T=A.city;h[L]||(h[L]={}),v&&(h[L][v]||(h[L][v]=new Set),T&&h[L][v].add(T))}),u.continent.innerHTML='<option value="all">All Continents</option>',Object.keys(h).forEach(w=>{u.continent.innerHTML+=`<option value="${w}">${w}</option>`}),u.continent.addEventListener("change",()=>{const w=u.continent.value,A=w==="all";u.country.innerHTML='<option value="all">All Countries</option>',u.country.disabled=A,u.city.innerHTML='<option value="all">All Cities</option>',u.city.disabled=!0,!A&&h[w]&&(Object.keys(h[w]).forEach(L=>{u.country.innerHTML+=`<option value="${L}">${L}</option>`}),Rt(w))}),u.country.addEventListener("change",()=>{const w=u.continent.value,A=u.country.value,L=A==="all";u.city.innerHTML='<option value="all">All Cities</option>',u.city.disabled=L,!L&&h[w][A]?(h[w][A].forEach(v=>{u.city.innerHTML+=`<option value="${v}">${v}</option>`}),Rt(A)):L&&Rt(w)}),u.city.addEventListener("change",()=>{const w=u.city.value;Rt(w!=="all"?w:u.country.value)})}x(),document.getElementById("add-condition-btn"),document.getElementById("add-spatial-btn")||document.getElementById("add-condition-btn")});Promise.all([Ic,Mc,Dc,Pc]).then(()=>{const t=document.getElementById("spatial-builder-container");t&&(t.innerHTML="",mt());const e=new ac;e.init(),e.start();try{typeof ti=="function"&&(Ae=ti());const r=document.getElementById("spatial-builder-container");r&&typeof mt=="function"&&(r.innerHTML="",mt())}catch(r){console.error(" Guided Mode Init Failed:",r)}const n=new pc(V,me),i=new uc(n);i.init(),window.UserCenter=i;const o=new hc(V,me);o.init(),window.AgentController=o,typeof Gt=="function"&&Gt()}).catch(t=>{console.error(t)});function cr(){const t=document.getElementById("legend-panel");if(!t)return;let e=`<h4 data-i18n="legend_title">${ee.t("legend_title")}</h4>`;e+=`
    <div style="margin-bottom:8px; border-bottom:1px solid #555; padding-bottom:5px;">
        <div class="legend-item">
            <span class="symbol" style="background:#7209b7; border:2px solid white;"></span> 
            <span style="font-size:0.8em">${ee.t("legend_level_continent")}</span>
        </div>
        <div class="legend-item">
            <span class="symbol" style="background:#f4a261; border:2px solid white;"></span> 
            <span style="font-size:0.8em">${ee.t("legend_level_country")}</span>
        </div>
        <div class="legend-item">
            <span class="symbol" style="background:#D90429; border:2px solid white;"></span> 
            <span style="font-size:0.8em">${ee.t("legend_level_city")}</span>
        </div>
    </div>
    `,e+=`<div style="font-size:0.8em; color:#aaa; margin-bottom:5px;">${ee.t("legend_type_title")}</div>`;const i=Object.keys(ei).filter(o=>o!=="Unknown");i.push("Unknown"),i.forEach(o=>{const r=ei[o],s=Ec[o],a=ee.t(s),c=Sc(r).toDataURL();e+=`
        <div class="legend-item" style="display:flex; align-items:center; margin-bottom: 6px;">
            <img src="${c}" style="width: 20px; height: 20px; margin-right: 8px; filter: drop-shadow(0px 1px 2px rgba(0,0,0,0.3));" />
            
            <span style="font-size: 0.9em;">${a}</span>
        </div>
        `}),t.innerHTML=e}cr();function kc(t){console.log(" Smart Auto-rotation initialized (Targeted UI).");const e=.7,n=6e4;let i=null,o=null,r=Date.now();const s=()=>{if(i)return;console.log(" Resuming auto-rotation..."),r=Date.now();const p=()=>{const f=Date.now(),m=(f-r)/1e3;r=f;const y=-(e*(Math.PI/180))*m;t.camera.rotate(Cesium.Cartesian3.UNIT_Z,y)};i=t.scene.postUpdate.addEventListener(p)},a=()=>{i&&(i(),i=null,console.log(" Interaction detected. Rotation paused."))},l=()=>{a(),o&&clearTimeout(o),o=setTimeout(()=>{s()},n)};window.stopEarthRotation=l;const c=new Cesium.ScreenSpaceEventHandler(t.scene.canvas);[Cesium.ScreenSpaceEventType.LEFT_DOWN,Cesium.ScreenSpaceEventType.RIGHT_DOWN,Cesium.ScreenSpaceEventType.MIDDLE_DOWN,Cesium.ScreenSpaceEventType.WHEEL,Cesium.ScreenSpaceEventType.PINCH_START].forEach(p=>c.setInputAction(l,p)),["sidebar","agent-container","agent-avatar","user-profile-widget"].forEach(p=>{const f=document.getElementById(p);f&&(f.addEventListener("mouseenter",l),f.addEventListener("mousemove",l),f.addEventListener("click",l),f.addEventListener("wheel",l),f.addEventListener("keydown",l),f.addEventListener("touchstart",l))}),s()}kc(V);
